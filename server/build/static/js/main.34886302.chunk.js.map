{"version":3,"sources":["helper/token.js","themes/theme.js","pages/Register/styles.js","components/RegisterForm/styles.js","components/RegisterForm/LoginRedirect.js","components/RegisterForm/RegisterForm.js","services/register.js","assets/bg-img.png","components/LeftImageIntro/LeftImage.js","pages/Register/Register.js","components/LoginForm/styles.js","components/LoginForm/RegisterRedirect.js","components/LoginForm/LoginForm.js","services/login.js","pages/Login/styles.js","pages/Login/Login.js","socket-client/socket.js","services/users.js","services/messenger.js","helper/functions.js","components/UserPanel/User/User.js","components/UserPanel/UserList/UserList.js","components/UserPanel/FilterContacts/FilterInput.js","components/UserPanel/styles.js","components/UserPanel/CurrentUserBox/styles.js","components/UserPanel/CurrentUserBox/menu-options/ChangeAvatar.js","components/UserPanel/CurrentUserBox/AccountMenu.js","components/UserPanel/CurrentUserBox/CurrentUserBox.js","components/UserPanel/UserPanel.js","components/ChatContainer/ChatBox/styles.js","components/ChatContainer/ChatBox/ChatBox.js","components/ChatContainer/ChatHeader/styles.js","components/ChatContainer/ChatHeader/ChatHeader.js","components/ChatContainer/ChatInput/styles.js","components/ChatContainer/ChatInput/ChatInput.js","components/ChatContainer/styles.js","components/ChatContainer/ChatContainer.js","pages/Messenger/styles.js","pages/Messenger/Messenger.js","App.js","index.js"],"names":["token","theme","createTheme","typography","fontFamily","palette","primary","main","secondary","contrastText","useStyles","makeStyles","container","height","width","left","breakpoints","down","display","flexDirection","alignItems","justifyContent","margin","spacing","up","headerText","fontSize","textAlign","marginBottom","formContainer","inputField","mainButton","padding","redirectContainer","redirectButton","redirectText","color","marginTop","RedirectToLogin","classes","history","useHistory","className","Grid","item","Typography","variant","Button","id","type","size","onClick","push","RegisterForm","createUser","useState","username","setUserName","nickName","setNickName","password","setPassword","email","setEmail","showSnackbar","setShowSnackBar","errorMessage","setErrorMessage","handleCloseSnack","event","reason","LoginRedirect","onSubmit","preventDefault","errors","length","test","Object","values","every","n","validate","name","xs","TextField","value","label","required","fullWidth","autoFocus","autoComplete","onChange","target","error","Boolean","helperText","disableElevation","Snackbar","anchorOrigin","vertical","horizontal","open","autoHideDuration","onClose","Alert","severity","create","credentials","a","axios","post","response","data","registerService","background","bgImage","backgroundRepeat","backgroundSize","backgroundPosition","icon","LeftImage","Container","align","Box","letterSpacing","lineHeight","Register","message","setMessage","sm","right","userObject","then","returnedUser","window","localStorage","setItem","JSON","stringify","catch","marginRight","RedirectToRegister","LoginForm","loginUser","RegisterRedirect","login","loginService","Login","setTimeout","socket","socketIOClient","setToken","newToken","baseUrl","getUsers","changeAvatar","fd","setProgress","headers","Authorization","onUploadProgress","progressEvent","loaded","total","usersService","createConversation","usernames","saveMessage","conversationID","config","messengerService","stringToHslColor","str","saturation","lightness","hash","i","charCodeAt","User","avatarID","avatarBGColor","userCardContainer","cursor","boxShadow","paddingLeft","avatarColor","Card","elevation","CardHeader","avatar","Avatar","src","substring","toUpperCase","title","UserList","users","filterUser","startConversation","List","reduce","acc","cur","toLowerCase","includes","ListItem","disableGutters","style","Filter","handler","searchContainer","searchIconContainer","Paper","IconButton","disabled","InputBase","placeholder","inputProps","userPanelContainer","overflow","chatHeaderText","currentUserContainer","avatarNameContainer","currentUserAvatarColor","currentUserName","ChangeAvatar","setCurrentUser","showDropzone","setShowDropzone","setImageFile","handleSubmit","file","FormData","append","newUser","loggedUserJSON","getItem","oldUser","parse","updated","onDelete","acceptedFiles","maxFileSize","filesLimit","showFileNamesInPreview","showFileNames","dropzoneText","getFileAddedMessage","getFileRemovedMessage","onAlert","alert","console","log","getFileLimitExceedMessage","getDropRejectMessage","onSave","AccountMenu","anchorEl","setAnchorEl","handleClose","Tooltip","currentTarget","sx","Menu","PaperProps","filter","mt","ml","mr","content","position","top","bgcolor","transform","zIndex","transformOrigin","MenuItem","Divider","removeItem","ListItemIcon","CurrentUserBox","currentUser","UserPanel","filteredName","setFilter","FilterInput","messageBox","flexGrow","sendingMessageContainer","receivingMessageContainer","sentMessageBackground","borderBottomLeftRadius","borderTopLeftRadius","borderBottomRightRadius","maxWidth","receivedMessageBackground","borderTopRightRadius","ChatBox","messages","map","sender","text","chatHeaderContainer","chatHeaderTextAvatarContainer","marginLeft","fontWeight","closeChat","closeIcon","ChatHeader","targetUser","toggleOpen","chatInput","borderRadius","chatInputText","ChatInput","sendMessage","setText","useTheme","mobile","useMediaQuery","onKeyPress","key","trim","chatContainer","ChatContainer","root","openPanel","closePanel","noChatContainer","noChatIcon","noChatText","Messenger","currentConversationID","setConversationID","existingChat","setExistingChat","setUsers","setMessages","currentlySpeakingWith","setCurrentlySpeakingWith","setOpen","useEffect","userLoggedIn","userList","participants","conversation","conversationInfo","user","emit","on","messageToSend","msg","md","App","path","component","to","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.34886302.chunk.js","sourcesContent":["export let token;\r\n\r\nexport const setToken = newToken => {\r\n  token = `bearer ${newToken}`;\r\n}\r\n","import { createTheme } from '@material-ui/core/styles'\r\nexport const theme = createTheme({\r\n  typography: {\r\n    fontFamily: \"Open Sans\",\r\n  },\r\n  palette: {\r\n    primary: { main: \"#3A8DFF\" },\r\n    secondary: { main: \"#fff\", contrastText: \"#3A8DFF\" },\r\n  }\r\n});","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"100vh\",\r\n    width: \"100vw\"\r\n  },\r\n  left: {\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      display: \"none\"\r\n    }\r\n  },\r\n}));","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    display: \"flex\",\r\n    height: \"100%\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    margin: theme.spacing(0, 5),\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      margin: theme.spacing(0, 4)\r\n    },\r\n    [theme.breakpoints.up(\"lg\")]: {\r\n      margin: theme.spacing(0, 15)\r\n    },\r\n  },\r\n  headerText: {\r\n    fontSize: \"1.75em\",\r\n    textAlign: \"start\",\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(3)\r\n  },\r\n  formContainer: {\r\n    margin: theme.spacing(0, 5),\r\n  },\r\n  inputField: {\r\n    marginBottom: theme.spacing(2, 0),\r\n  },\r\n  mainButton: {\r\n    padding: theme.spacing(1.5, 5.5),\r\n    margin: theme.spacing(10, 0, 5),\r\n  },\r\n  redirectContainer: {\r\n    marginBottom: theme.spacing(10),\r\n    display: \"flex\",\r\n    flexDirection: \"horizontal\",\r\n    alignItems: \"end\",\r\n    width: \"100%\",\r\n  },\r\n  redirectButton: {\r\n    padding: theme.spacing(1.5, 5.5),\r\n  },\r\n  redirectText: {\r\n    color: \"lightgrey\",\r\n    marginTop: theme.spacing(1),\r\n  },\r\n}));","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\"\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { useStyles } from \"./styles\"\r\n\r\nconst RedirectToLogin = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const redirectButton = () => {\r\n    history.push(\"/login\");\r\n  }\r\n\r\n  return (\r\n    <div className={classes.redirectContainer}>\r\n      <Grid container justifyContent=\"flex-end\" spacing={2}>\r\n        <Grid item>\r\n          <Typography className={classes.redirectText} variant=\"subtitle1\">\r\n            Already have an account?\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Button\r\n            id=\"change-to-login-button\"\r\n            type=\"button\"\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            size=\"large\"\r\n            className={classes.redirectButton}\r\n            onClick={redirectButton}\r\n          >\r\n            <b>Login</b>\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RedirectToLogin;","import React, { useState } from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { Alert } from \"@material-ui/lab\";\r\n\r\nimport { useStyles } from \"./styles\"\r\nimport LoginRedirect from \"./LoginRedirect\";\r\n\r\n//createUser props will be the axios post call that will take user object created here as parameter\r\nconst RegisterForm = ({ createUser }) => {\r\n\r\n  const [username, setUserName] = useState(\"\");\r\n  const [nickName, setNickName] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n\r\n  const [showSnackbar, setShowSnackBar] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState({});\r\n  const classes = useStyles();\r\n\r\n  const validate = () => {\r\n    let errors = {};\r\n    errors.username = username.length > 2 ? \"\" : \"Minimum of 3 characters\";\r\n    errors.password = password.length > 5 ? \"\" : \"Minimum of 6 characters\";\r\n    errors.email = (/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9]+\\.[A-Za-z]+$/.test(email)) ? \"\" : \"Email Format is xyz@xxx.xxx\";\r\n    setErrorMessage({ ...errors });\r\n\r\n    return Object.values(errors).every(n => n === \"\");\r\n  }\r\n\r\n  const handleUsernameChange = (event) => {\r\n    setUserName(event.target.value);\r\n  }\r\n  const handleNickNameChange = (event) => {\r\n    setNickName(event.target.value);\r\n  }\r\n  const handlePasswordChange = (event) => {\r\n    setPassword(event.target.value);\r\n  }\r\n  const handleEmailChange = (event) => {\r\n    setEmail(event.target.value);\r\n  }\r\n  const handleCloseSnack = (event, reason) => {\r\n    setShowSnackBar(false);\r\n  };\r\n\r\n  const registerUser = (event) => {\r\n    event.preventDefault();\r\n\r\n    //Only send request when all validations are passed\r\n    if (validate()) {\r\n      createUser({\r\n        username: username,\r\n        name: nickName,\r\n        email: email,\r\n        password: password\r\n      })\r\n      setShowSnackBar(false);\r\n      setUserName(\"\");\r\n      setNickName(\"\");\r\n      setEmail(\"\");\r\n      setPassword(\"\");\r\n    } else {\r\n      setShowSnackBar(true);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <LoginRedirect />\r\n      <div className={classes.formContainer}>\r\n        <Typography variant=\"h4\" className={classes.headerText}>\r\n          <b>Create an account</b>\r\n        </Typography>\r\n        <form onSubmit={registerUser}>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} className={classes.inputField}>\r\n              <TextField\r\n                value={username}\r\n                label=\"Username\"\r\n                id=\"username\"\r\n                required\r\n                fullWidth\r\n                autoFocus\r\n                autoComplete='off'\r\n                onChange={handleUsernameChange}\r\n                error={Boolean(errorMessage.username)}\r\n                helperText={errorMessage.username ? errorMessage.username : \"\"}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                value={nickName}\r\n                label=\"Name\"\r\n                id=\"name\"\r\n                required\r\n                fullWidth\r\n                autoComplete='off'\r\n                onChange={handleNickNameChange}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                value={email}\r\n                label=\"E-mail Address\"\r\n                id=\"email\"\r\n                required\r\n                fullWidth\r\n                autoComplete='off'\r\n                onChange={handleEmailChange}\r\n                error={Boolean(errorMessage.email)}\r\n                helperText={errorMessage.email ? errorMessage.email : \"\"}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                value={password}\r\n                type=\"password\"\r\n                label=\"Password\"\r\n                id=\"password\"\r\n                required\r\n                fullWidth\r\n                autoComplete='off'\r\n                onChange={handlePasswordChange}\r\n                error={Boolean(errorMessage.password)}\r\n                helperText={errorMessage.password ? errorMessage.password : \"\"}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <Grid container justifyContent=\"center\">\r\n            <Grid item>\r\n              <Button\r\n                id=\"create-button\"\r\n                type=\"submit\"\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                size=\"large\"\r\n                className={classes.mainButton}\r\n                disableElevation\r\n              >\r\n                <b>\r\n                  Create\r\n                </b>\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <div>\r\n        <Snackbar anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }} open={showSnackbar} autoHideDuration={3000} onClose={handleCloseSnack}>\r\n          <Alert onClose={handleCloseSnack} severity=\"error\">\r\n            Please make sure all inputs are valid.\r\n          </Alert>\r\n        </Snackbar>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RegisterForm;","import axios from \"axios\"; \r\n\r\nconst baseUrl = \"/register\";\r\n\r\nconst create = async credentials => {\r\n  const response = await axios.post(baseUrl, credentials);\r\n  \r\n  return response.data;\r\n}\r\n\r\nconst registerService = {\r\n  create\r\n};\r\nexport default registerService;","export default __webpack_public_path__ + \"static/media/bg-img.0c5628a9.png\";","import { Container } from '@material-ui/core';\r\nimport React from 'react'\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TextsmsOutlinedIcon from '@material-ui/icons/TextsmsOutlined';\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport bgImage from \"../../assets/bg-img.png\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"100%\",\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    flexDirection: \"column\",\r\n    background: `linear-gradient(180deg, rgba(58, 141, 255, 0.85), rgba(134, 185, 255, 0.85)), url(${bgImage})`,\r\n    backgroundRepeat: \"no-repeat\",\r\n    backgroundSize: \"cover\",\r\n    backgroundPosition: \"center\",\r\n  },\r\n  icon: {\r\n    fontSize: \"75px\"\r\n  }\r\n}));\r\n\r\nconst LeftImage = () => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Container className={classes.container}>\r\n      <TextsmsOutlinedIcon color=\"secondary\" className={classes.icon} />\r\n      <Typography variant=\"h4\" color=\"secondary\" align=\"center\">\r\n        <Box letterSpacing={2} lineHeight={1.5}>\r\n          Converse with anyone at any moment\r\n        </Box>\r\n      </Typography>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default LeftImage\r\n","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport { useStyles } from \"./styles\";\r\nimport RegistrationForm from \"../../components/RegisterForm/RegisterForm\";\r\nimport registerService from \"../../services/register\";\r\nimport LeftImage from \"../../components/LeftImageIntro/LeftImage\";\r\n\r\nconst Register = () => {\r\n    const [message, setMessage] = useState(\"\");\r\n    const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n    const history = useHistory();\r\n    const classes = useStyles();\r\n\r\n    const createUser = (userObject) => {\r\n        registerService.create(userObject)\r\n            .then(returnedUser => {\r\n                setMessage(`Registration Successful! Welcome ${returnedUser.name}`);\r\n\r\n                window.localStorage.setItem(\r\n                    \"userAuthenticated\", JSON.stringify(returnedUser)\r\n                );\r\n\r\n                history.push(\"/messenger\");\r\n            })\r\n            .catch(error => {\r\n                setErrorMessage(\"Something went wrong on our side. Please try again later\");\r\n            })\r\n    }\r\n\r\n    return (\r\n        <Grid container className={classes.container}>\r\n            <Grid item sm={5} className={classes.left} >\r\n                <LeftImage />\r\n            </Grid>\r\n            <Grid item xs={12} sm={7} className={classes.right}>\r\n                {(message &&\r\n                    <Alert severity=\"success\">\r\n                        {message}\r\n                    </Alert>\r\n                )}\r\n                {(errorMessage &&\r\n                    <Alert severity=\"error\">\r\n                        {errorMessage}\r\n                    </Alert>\r\n                )}\r\n                <RegistrationForm createUser={createUser} />\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n}\r\n\r\nexport default Register;","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    display: \"flex\",\r\n    height: \"100%\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    margin: theme.spacing(0, 5),\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      margin: theme.spacing(0, 4)\r\n    },\r\n    [theme.breakpoints.up(\"lg\")]: {\r\n      margin: theme.spacing(0, 8)\r\n    },\r\n  },\r\n  headerText: {\r\n    fontSize: \"1.75em\",\r\n    textAlign: \"start\",\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(4)\r\n  },\r\n  formContainer: {\r\n    width: \"70%\"\r\n  },\r\n  inputField: {\r\n    marginBottom: theme.spacing(2, 0),\r\n  },\r\n  mainButton: {\r\n    padding: theme.spacing(1.5, 5.5),\r\n    margin: theme.spacing(8, 0, 5),\r\n  },\r\n  redirectContainer: {\r\n    marginBottom: theme.spacing(10),\r\n    marginRight: theme.spacing(15),\r\n    display: \"flex\",\r\n    flexDirection: \"horizontal\",\r\n    alignItems: \"end\",\r\n    width: \"100%\",\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      marginRight: theme.spacing(0)\r\n    },\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      marginRight: theme.spacing(5)\r\n    },\r\n    [theme.breakpoints.down(\"md\")]: {\r\n      marginRight: theme.spacing(6)\r\n    },\r\n  },\r\n  redirectButton: {\r\n    padding: theme.spacing(1.5, 5.5),\r\n  },\r\n  redirectText: {\r\n    color: \"lightgrey\",\r\n    marginTop: theme.spacing(1),\r\n  },\r\n}));","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { useStyles } from \"./styles\"\r\n\r\nconst RedirectToRegister = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const redirectButton = () => {\r\n    history.push(\"/register\");\r\n  }\r\n\r\n  return (\r\n    <div className={classes.redirectContainer}>\r\n      <Grid container justifyContent=\"flex-end\" spacing={2}>\r\n        <Grid item>\r\n          <Typography className={classes.redirectText} variant=\"subtitle1\">\r\n            Don't have an account?\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            size=\"large\"\r\n            className={classes.redirectButton}\r\n            onClick={redirectButton}\r\n          >\r\n            <b>Create</b>\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RedirectToRegister;","import React, { useState } from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { useStyles } from \"./styles\"\r\nimport RegisterRedirect from \"./RegisterRedirect\";\r\n\r\n//loginUser prop will be an async function that takes user credential as an object\r\nconst LoginForm = ({ loginUser }) => {\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const classes = useStyles();\r\n\r\n  const handleEmailChange = (event) => {\r\n    setEmail(event.target.value);\r\n  }\r\n  const handlePasswordChange = (event) => {\r\n    setPassword(event.target.value);\r\n  }\r\n\r\n  const submitUser = (event) => {\r\n    event.preventDefault();\r\n\r\n    loginUser({\r\n      email: email,\r\n      password: password\r\n    })\r\n    setEmail(\"\");\r\n    setPassword(\"\");\r\n  }\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <RegisterRedirect />\r\n      <div className={classes.formContainer}>\r\n        <Typography variant=\"h4\" className={classes.headerText} >\r\n          <b>Welcome Back!</b>\r\n        </Typography>\r\n        <form onSubmit={submitUser}>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} className={classes.inputField}>\r\n              <TextField\r\n                value={email}\r\n                id=\"email\"\r\n                label=\"E-mail\"\r\n                fullWidth\r\n                autoFocus\r\n                autoComplete='off'\r\n                onChange={handleEmailChange}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                value={password}\r\n                id=\"password\"\r\n                type=\"password\"\r\n                label=\"Password\"\r\n                fullWidth\r\n                autoComplete='off'\r\n                onChange={handlePasswordChange}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <Grid container justifyContent=\"center\">\r\n            <Grid item>\r\n              <Button\r\n                type=\"submit\"\r\n                id=\"login-button\"\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                size=\"large\"\r\n                className={classes.mainButton}\r\n                disableElevation\r\n              >\r\n                <b>Login</b>\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginForm;","import axios from \"axios\"; \r\n\r\nconst baseUrl = \"/login\";\r\n\r\nconst login = async credentials => {\r\n  const response = await axios.post(baseUrl, credentials);\r\n  \r\n  return response.data;\r\n}\r\n\r\nconst loginService = {\r\n  login\r\n};\r\nexport default loginService;","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"100vh\",\r\n    width: \"100vw\"\r\n  },\r\n  left: {\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      display: \"none\"\r\n    }\r\n  }\r\n}));","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport LoginForm from \"../../components/LoginForm/LoginForm\";\r\nimport loginService from \"../../services/login\";\r\nimport { useStyles } from \"./styles\";\r\nimport LeftImage from \"../../components/LeftImageIntro/LeftImage\";\r\n\r\nconst Login = () => {\r\n\r\n    const [message, setMessage] = useState(\"\");\r\n    const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n    const history = useHistory();\r\n    const classes = useStyles();\r\n\r\n    const loginUser = (userObject) => {\r\n        loginService.login(userObject)\r\n            .then(returnedUser => {\r\n                setMessage(`Login Successful! Redirecting to messager app`);\r\n\r\n                window.localStorage.setItem(\r\n                    \"userAuthenticated\", JSON.stringify(returnedUser)\r\n                );\r\n                history.push(\"/messenger\");\r\n            })\r\n            .catch(error => {\r\n                setErrorMessage(\"Invalid Username or Password\");\r\n                setTimeout(() => {\r\n                    setErrorMessage(null);\r\n                }, 5000)\r\n            })\r\n    }\r\n\r\n    return (\r\n        <Grid container className={classes.container}>\r\n            <Grid item sm={5} className={classes.left} >\r\n                <LeftImage />\r\n            </Grid>\r\n            <Grid item xs={12} sm={7}>\r\n                {(message &&\r\n                    <Alert severity=\"success\">\r\n                        {message}\r\n                    </Alert>\r\n                )}\r\n                {(errorMessage &&\r\n                    <Alert severity=\"error\">\r\n                        {errorMessage}\r\n                    </Alert>\r\n                )}\r\n                <LoginForm loginUser={loginUser} />\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n}\r\n\r\nexport default Login;","import socketIOClient from 'socket.io-client';\r\n\r\nconst socket = socketIOClient();\r\nexport default socket;","import axios from \"axios\";\r\nimport { token } from \"../helper/token\"\r\n\r\nconst baseUrl = \"/users\";\r\n\r\nconst getUsers = async username => {\r\n  const response = await axios.post(baseUrl, username);\r\n\r\n  return response.data;\r\n}\r\n\r\nconst changeAvatar = async (fd, setProgress) => {\r\n\r\n  const response = await axios.post(`${baseUrl}/avatar`, fd, {\r\n    headers: { Authorization: `${token}` },\r\n    onUploadProgress: (progressEvent) => {\r\n      setProgress((progressEvent.loaded / progressEvent.total) * 100);\r\n    }\r\n  });\r\n  return response.data;\r\n}\r\n\r\nconst usersService = {\r\n  getUsers,\r\n  changeAvatar\r\n};\r\nexport default usersService;","import axios from \"axios\";\r\nimport { token } from \"../helper/token\"\r\nconst baseUrl = \"/messages\";\r\n\r\nconst createConversation = async usernames => {\r\n  const response = await axios.post(baseUrl, usernames);\r\n\r\n  return response.data;\r\n}\r\n\r\nconst saveMessage = async (conversationID, message) => {\r\n  const config = {\r\n    headers: { Authorization: `${token}` }\r\n  };\r\n  const response = await axios.post(\r\n    `${baseUrl}/${conversationID}`,\r\n    { message },\r\n    config\r\n  );\r\n  return response.data;\r\n}\r\n\r\nconst messengerService = {\r\n  createConversation,\r\n  saveMessage,\r\n};\r\nexport default messengerService;\r\n","//Randomize Avatar Color based on Usernames\r\nexport const stringToHslColor = (str, saturation, lightness) => {\r\n  let hash = 0;\r\n  for (let i = 0; i < str.length; i++) {\r\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\r\n  }\r\n\r\n  let h = hash % 360;\r\n  return `hsl(${h}, ${saturation}%, ${lightness}%)`;\r\n}","import React from \"react\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from \"@material-ui/core/CardHeader\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { stringToHslColor } from \"../../../helper/functions\";\r\n\r\nconst User = ({ username, avatarID }) => {\r\n\r\n  const avatarBGColor = stringToHslColor(username, 50, 80);\r\n\r\n  const useStyles = makeStyles((theme) => ({\r\n    userCardContainer: {\r\n      height: \"100px\",\r\n      width: \"100%\",\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      cursor: \"pointer\",\r\n      boxShadow: \"0.125em 0.125em 0.25em rgba(0, 0, 0, 0.05)\",\r\n      paddingLeft: theme.spacing(1),\r\n    },\r\n    avatarColor: {\r\n      background: `${avatarBGColor}`,\r\n      width: \"60px\",\r\n      height: \"60px\"\r\n    }\r\n  }))\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Card className={classes.userCardContainer} elevation={0}>\r\n      <CardHeader\r\n        avatar={\r\n          <Avatar className={classes.avatarColor}\r\n            src={avatarID ? `/users/avatar/${avatarID}` : \"\"}\r\n            aria-label=\"users\" >\r\n            {username.substring(0, 1).toUpperCase()}\r\n          </Avatar>\r\n        }\r\n        title={<b>{username}</b>}\r\n      />\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default User;","import React from \"react\";\r\nimport User from \"../User/User\";\r\nimport { List, ListItem } from \"@material-ui/core\";\r\n\r\nconst UserList = ({ users, filterUser, startConversation }) => {\r\n\r\n  const reduceUsers = (acc, cur) => {\r\n    if (cur.username.toLowerCase().includes(filterUser.toLowerCase())) {\r\n      return [...acc,\r\n      <ListItem disableGutters={true} style={{ padding: 1 }} key={cur.id} onClick={() => startConversation(cur)}>\r\n        <User username={cur.username} avatarID={cur.avatar} />\r\n      </ListItem>\r\n      ];\r\n    }\r\n    return acc;\r\n  }\r\n\r\n  return (\r\n    <List>\r\n      {users ? users.reduce(reduceUsers, []) : null}\r\n    </List>\r\n  )\r\n}\r\n\r\nexport default UserList;","import React from \"react\"\r\nimport { IconButton, InputBase, Paper } from \"@material-ui/core\";\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst Filter = ({ name, handler }) => {\r\n\r\n  const useStyles = makeStyles((theme) => ({\r\n    searchContainer: {\r\n      background: `#E9EEF9`,\r\n      height: 65,\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      margin: theme.spacing(0, 2),\r\n    },\r\n    searchIconContainer: {\r\n      paddingLeft: 10\r\n    }\r\n  }));\r\n  const classes = useStyles();\r\n  return (\r\n    <Paper\r\n      className={classes.searchContainer}\r\n      elevation={0}\r\n    >\r\n      <IconButton aria-label=\"search\" disabled={true}>\r\n        <SearchIcon />\r\n      </IconButton>\r\n      <InputBase\r\n        placeholder=\"Search\"\r\n        id=\"search-bar\"\r\n        inputProps={{ 'aria-label': 'Search' }}\r\n        value={name}\r\n        onChange={handler}\r\n      />\r\n    </Paper>\r\n  )\r\n}\r\n\r\nexport default Filter;","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  userPanelContainer: {\r\n    height: \"100vh\",\r\n    overflow: \"auto\",\r\n    boxShadow: \"0.125em 0.125em 0.25em rgba(0, 0, 0, 0.025)\",\r\n  },\r\n  chatHeaderText: {\r\n    margin: theme.spacing(0, 2, 2, 2)\r\n  },\r\n}));","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  currentUserContainer: {\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"left\",\r\n    justifyContent: \"space-between\",\r\n    padding: theme.spacing(3, 2),\r\n  },\r\n  avatarNameContainer: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n  },\r\n  currentUserAvatarColor: {\r\n    background: `linear-gradient(180deg, rgba(58, 141, 255, 0.85), rgba(134, 185, 255, 0.85))`,\r\n    width: \"60px\",\r\n    height: \"60px\",\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  currentUserName: {\r\n    fontSize: 24\r\n  },\r\n}));\r\n","import React, { useState } from 'react'\r\nimport usersService from '../../../../services/users';\r\nimport { DropzoneDialog } from 'material-ui-dropzone';\r\n\r\nconst ChangeAvatar = ({ setCurrentUser, showDropzone, setShowDropzone }) => {\r\n  const [imageFile, setImageFile] = useState(null);\r\n  const [progress, setProgress] = useState(null);\r\n\r\n  const handleFile = ([file]) => file && setImageFile(file);\r\n  const handleDelete = () => setImageFile(null);\r\n\r\n  const handleSubmit = async ([file]) => {\r\n    const fd = new FormData();\r\n\r\n    fd.append(\"avatar\", file);\r\n    const newUser = await usersService.changeAvatar(fd, setProgress);\r\n\r\n    //update user\r\n    const loggedUserJSON = window.localStorage.getItem(\"userAuthenticated\");\r\n    const oldUser = JSON.parse(loggedUserJSON);\r\n    const updated = { ...oldUser, avatar: newUser.avatar };\r\n    window.localStorage.setItem(\r\n      \"userAuthenticated\", JSON.stringify(updated)\r\n    );\r\n    setCurrentUser(newUser);\r\n    setShowDropzone(false);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <DropzoneDialog\r\n        open={showDropzone}\r\n        onChange={handleFile}\r\n        onClose={() => setShowDropzone(false)}\r\n        onDelete={handleDelete}\r\n        acceptedFiles={['image/jpeg', 'image/png']}\r\n        maxFileSize={20000000} //20MB as Max Limit\r\n        filesLimit={1}\r\n        showFileNamesInPreview={false}\r\n        showFileNames={false}\r\n        dropzoneText={'Drop image here'}\r\n        getFileAddedMessage={() => 'Image successfully added!'}\r\n        getFileRemovedMessage={() => 'Image successfully deleted!'}\r\n        onAlert={(alert) => console.log({ alert })}\r\n        getFileLimitExceedMessage={() => 'File is too big'}\r\n        getDropRejectMessage={(file) => {\r\n          if (file.size > 5000000) return 'File is too big';\r\n          else return 'Invalid file type';\r\n        }}\r\n        onSave={handleSubmit}\r\n      />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ChangeAvatar","import React, { useState, Fragment } from 'react';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\r\nimport { Avatar, Divider, IconButton, Menu, Tooltip } from '@mui/material';\r\nimport Logout from '@mui/icons-material/Logout';\r\nimport ListItemIcon from '@mui/material/ListItemIcon';\r\nimport ChangeAvatar from './menu-options/ChangeAvatar';\r\n\r\nconst AccountMenu = ({ setCurrentUser }) => {\r\n\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const open = Boolean(anchorEl);\r\n  const [showDropzone, setShowDropzone] = useState(false);\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  //Handle Logging Out\r\n  const history = useHistory();\r\n\r\n  const handleLogOut = (event) => {\r\n    window.localStorage.removeItem(\"userAuthenticated\");\r\n    history.push(\"/register\");\r\n    setCurrentUser(null);\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Tooltip title=\"Account settings\">\r\n        <IconButton onClick={handleClick} size=\"small\" >\r\n          <MoreHorizIcon sx={{ width: 32, height: 32 }} />\r\n        </IconButton>\r\n      </Tooltip>\r\n      <Menu\r\n        anchorEl={anchorEl}\r\n        open={open}\r\n        onClose={handleClose}\r\n        onClick={handleClose}\r\n        PaperProps={{\r\n          elevation: 0,\r\n          sx: {\r\n            overflow: 'visible',\r\n            filter: 'drop-shadow(0px 2px 8px rgba(0,0,0,0.32))',\r\n            mt: 1.5,\r\n            '& .MuiAvatar-root': {\r\n              width: 32,\r\n              height: 32,\r\n              ml: -0.5,\r\n              mr: 1,\r\n            },\r\n            '&:before': {\r\n              content: '\"\"',\r\n              display: 'block',\r\n              position: 'absolute',\r\n              top: 0,\r\n              right: 14,\r\n              width: 10,\r\n              height: 10,\r\n              bgcolor: 'background.paper',\r\n              transform: 'translateY(-50%) rotate(45deg)',\r\n              zIndex: 0,\r\n            },\r\n          },\r\n        }}\r\n        transformOrigin={{ horizontal: 'right', vertical: 'top' }}\r\n        anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\r\n      >\r\n        <MenuItem onClick={() => setShowDropzone(true)}>\r\n          <Avatar /> Change Avatar\r\n        </MenuItem>\r\n        <Divider />\r\n        <MenuItem onClick={handleLogOut}>\r\n          <ListItemIcon>\r\n            <Logout fontSize=\"small\" />\r\n          </ListItemIcon>\r\n          Logout\r\n        </MenuItem>\r\n      </Menu>\r\n      <ChangeAvatar setCurrentUser={setCurrentUser} showDropzone={showDropzone} setShowDropzone={setShowDropzone} />\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default AccountMenu;","import { Avatar, Container, Typography } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { useStyles } from './styles'\r\nimport AccountMenu from \"./AccountMenu\";\r\n\r\nconst CurrentUserBox = ({ currentUser, setCurrentUser }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Container className={classes.currentUserContainer}>\r\n      <div className={classes.avatarNameContainer}>\r\n        <Avatar className={classes.currentUserAvatarColor}\r\n          // Check if user exists first then check if they have avatar. \r\n          // bandaid solution for now, will have to look for better method\r\n          src={currentUser ? currentUser.avatar ? `/users/avatar/${currentUser.avatar}` : \"\" : \"\"}\r\n        />\r\n        <Typography className={classes.currentUserName} >\r\n          <b>{currentUser ? currentUser.username : \"None\"}</b>\r\n        </Typography>\r\n      </div>\r\n      <AccountMenu setCurrentUser={setCurrentUser} />\r\n    </Container>\r\n  )\r\n};\r\n\r\nexport default CurrentUserBox;","import UserList from \"./UserList/UserList\";\r\nimport FilterInput from \"./FilterContacts/FilterInput\";\r\nimport React, { useState } from \"react\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport { useStyles } from \"./styles\";\r\nimport CurrentUserBox from \"./CurrentUserBox/CurrentUserBox\";\r\n\r\nconst UserPanel = ({ currentUser, setCurrentUser, users, startConversation }) => {\r\n  const [filteredName, setFilter] = useState(\"\");\r\n\r\n  const handleFilter = (event) => {\r\n    setFilter(event.target.value);\r\n  }\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.userPanelContainer}>\r\n      <CurrentUserBox currentUser={currentUser} setCurrentUser={setCurrentUser} />\r\n      <Typography className={classes.chatHeaderText} variant=\"h4\">Chats</Typography>\r\n      <FilterInput name={filteredName} handler={handleFilter} />\r\n      <UserList users={users} filterUser={filteredName} startConversation={startConversation} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserPanel;","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  messageBox: {\r\n    flexGrow: 1,\r\n    overflow: \"scroll\",\r\n    margin: theme.spacing(1),\r\n    [theme.breakpoints.up(\"md\")]: {\r\n      margin: theme.spacing(2, 4)\r\n    },\r\n  },\r\n  sendingMessageContainer: {\r\n    margin: theme.spacing(2),\r\n    display: \"flex\",\r\n    justifyContent: \"flex-end\",\r\n  },\r\n  receivingMessageContainer: {\r\n    margin: theme.spacing(2),\r\n    display: \"flex\",\r\n    justifyContent: \"flex-start\",\r\n  },\r\n  sentMessageBackground: {\r\n    background: \"linear-gradient(90deg, rgba(58,141,255,1) 0%, rgba(107,169,255,0.85) 100%)\",\r\n    color: \"white\",\r\n    borderBottomLeftRadius: 18,\r\n    borderTopLeftRadius: 18,\r\n    borderBottomRightRadius: 18,\r\n    padding: theme.spacing(2, 5, 2, 4),\r\n    maxWidth: \"50%\",\r\n  },\r\n  receivedMessageBackground: {\r\n    background: \"#F4F4F4\",\r\n    color: \"rgba(89, 89, 89, 0.80)\",\r\n    borderBottomLeftRadius: 18,\r\n    borderTopRightRadius: 18,\r\n    borderBottomRightRadius: 18,\r\n    padding: theme.spacing(2, 5, 2, 4),\r\n    maxWidth: \"50%\",\r\n  }\r\n}));","import React from \"react\";\r\nimport { useStyles } from \"./styles\";\r\nimport ScrollToBottom from 'react-scroll-to-bottom';\r\n\r\nconst ChatBox = ({ currentUser, messages }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <ScrollToBottom className={classes.messageBox}>\r\n      {messages.map((message, i) =>\r\n        currentUser.username == message.sender.username ?\r\n          <div key={i} className={classes.sendingMessageContainer}>\r\n            <div className={classes.sentMessageBackground}>\r\n              {message.text}\r\n            </div>\r\n          </div> :\r\n          <div key={i} className={classes.receivingMessageContainer}>\r\n            <div className={classes.receivedMessageBackground}>\r\n              <b>{message.sender.username}:</b> {message.text}\r\n            </div>\r\n          </div>\r\n      )}\r\n    </ScrollToBottom>\r\n  );\r\n}\r\n\r\nexport default ChatBox;","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  chatHeaderContainer: {\r\n    boxShadow: \"0.125em 0.25em 0.5em rgba(0, 0, 0, 0.1)\",\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n    padding: theme.spacing(3, 0),\r\n  },\r\n  chatHeaderTextAvatarContainer: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    marginLeft: theme.spacing(4)\r\n  },\r\n  chatHeaderText: {\r\n    marginLeft: theme.spacing(4),\r\n    fontSize: 30,\r\n    fontWeight: \"bold\",\r\n  },\r\n  closeChat: {\r\n    marginRight: theme.spacing(1),\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      display: \"none\"\r\n    },\r\n  },\r\n  closeIcon: {\r\n    fontSize: 50\r\n  }\r\n}));","import { Avatar, Button } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { useStyles } from \"./styles\";\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport { stringToHslColor } from \"../../../helper/functions\";\r\n\r\nconst ChatHeader = ({ targetUser, toggleOpen }) => {\r\n  const classes = useStyles();\r\n\r\n  const avatarBGColor = stringToHslColor(targetUser.username, 50, 80);\r\n\r\n  return (\r\n    <div className={classes.chatHeaderContainer}>\r\n      <div className={classes.chatHeaderTextAvatarContainer}>\r\n        <Avatar src={targetUser.avatar ? `/users/avatar/${targetUser.avatar}` : \"\"} style={{ width: 50, height: 50, background: `${avatarBGColor}` }}>\r\n        </Avatar>\r\n        <div className={classes.chatHeaderText}>\r\n          {targetUser.username}\r\n        </div>\r\n      </div>\r\n      <Button onClick={toggleOpen} className={classes.closeChat}>\r\n        <CloseIcon color=\"primary\" fontSize=\"large\" />\r\n      </Button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ChatHeader\r\n","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  chatInput: {\r\n    display: \"flex\",\r\n    flexDirection: \"horizontal\",\r\n    alignItems: \"center\",\r\n    background: `#F4F6FA`,\r\n    height: 80,\r\n    borderRadius: 10,\r\n    margin: theme.spacing(0, 2, 2, 2),\r\n    padding: theme.spacing(0, 1, 0, 4),\r\n\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      margin: theme.spacing(0, 2, 2, 2),\r\n      padding: theme.spacing(0, 0, 0, 4),\r\n      height: 60\r\n    },\r\n  },\r\n  chatInputText: {\r\n    fontSize: 22,\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      fontSize: 18\r\n    },\r\n  },\r\n}));","import React from 'react'\r\nimport { IconButton, InputBase, Paper } from \"@material-ui/core\";\r\nimport { useStyles } from \"./styles\"\r\nimport SendIcon from '@mui/icons-material/Send';\r\nimport { useMediaQuery } from \"@mui/material\";\r\nimport { useTheme } from '@mui/material/styles';\r\n\r\nconst ChatInput = ({ sendMessage, text, setText }) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const mobile = useMediaQuery(theme.breakpoints.down('sm'));\r\n\r\n  const handleText = (event) => {\r\n    event.preventDefault();\r\n    setText(event.target.value);\r\n  }\r\n  return (\r\n    <form autoComplete=\"off\" onSubmit={sendMessage}>\r\n      <Paper\r\n        className={classes.chatInput}\r\n        elevation={0}\r\n      >\r\n        <InputBase\r\n          className={classes.chatInputText}\r\n          value={text}\r\n          variant=\"outlined\"\r\n          placeholder={mobile ? \"Say.....\" : \"Type something...\"}\r\n          fullWidth\r\n          autoFocus\r\n          onChange={handleText}\r\n          onKeyPress={event => event.key === \"Enter\" ? sendMessage(event) : null}\r\n        />\r\n        <IconButton\r\n          aria-label=\"send-message\"\r\n          disabled={text.trim() === \"\"}\r\n          type=\"button\"\r\n          onClick={sendMessage}\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n        >\r\n          <SendIcon />\r\n        </IconButton>\r\n      </Paper>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default ChatInput\r\n","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  chatContainer: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    height: \"100vh\",\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      width: \"100vw\"\r\n    },\r\n  },\r\n}));","import React from 'react'\r\nimport ChatBox from './ChatBox/ChatBox'\r\nimport ChatHeader from './ChatHeader/ChatHeader'\r\nimport ChatInput from './ChatInput/ChatInput'\r\nimport { useStyles } from './styles'\r\n\r\nconst ChatContainer = ({ currentUser, targetUser, messages, text, setText, sendMessage, toggleOpen }) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.chatContainer}>\r\n      <ChatHeader targetUser={targetUser} toggleOpen={toggleOpen} />\r\n      <ChatBox currentUser={currentUser} messages={messages} />\r\n      <ChatInput text={text} setText={setText} sendMessage={sendMessage} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ChatContainer\r\n","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: \"100vh\",\r\n    width: \"100vw\"\r\n  },\r\n  openPanel: {\r\n    display: \"block\"\r\n  },\r\n  closePanel: {\r\n    display: \"none\",\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      display: \"block\"\r\n    },\r\n  },\r\n  noChatContainer: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"center\",\r\n    height: \"100%\",\r\n    background: \"rgba(232, 232, 232, 0.4)\",\r\n    textAlign: \"center\",\r\n    alignItems: \"center\",\r\n\r\n  },\r\n  noChatIcon: {\r\n    color: \"rgba(89, 89, 89, 0.80)\",\r\n    fontSize: 100,\r\n    marginBottom: theme.spacing(5)\r\n  },\r\n  noChatText: {\r\n    color: \"rgba(89, 89, 89, 0.80)\",\r\n  }\r\n}));","import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport socket from \"../../socket-client/socket\";\r\nimport usersService from \"../../services/users\";\r\nimport messengerService from \"../../services/messenger\";\r\nimport { setToken } from \"../../helper/token\"\r\nimport UserPanel from \"../../components/UserPanel/UserPanel\";\r\nimport { Box } from \"@mui/system\";\r\nimport ChatContainer from \"../../components/ChatContainer/ChatContainer\";\r\nimport { Grid, Typography } from \"@material-ui/core\";\r\nimport { IoChatbubbleEllipsesSharp } from \"react-icons/io5\";\r\nimport { useStyles } from './styles';\r\n\r\nconst Messenger = () => {\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n\r\n  const [currentConversationID, setConversationID] = useState(\"\");\r\n  const [existingChat, setExistingChat] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [users, setUsers] = useState([]);\r\n  const [text, setText] = useState(\"\");\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  const [currentlySpeakingWith, setCurrentlySpeakingWith] = useState(\"\");\r\n\r\n  //For Mobile, Toggle Open will be used to switch views from UserPanel and Chat Panel\r\n\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const toggleOpen = () => {\r\n    setOpen(!open);\r\n  }\r\n\r\n  //Initialize users\r\n  useEffect(() => {\r\n    const loggedUserJSON = window.localStorage.getItem(\"userAuthenticated\");\r\n\r\n    if (loggedUserJSON) {\r\n      // Set Current User \r\n      const userLoggedIn = JSON.parse(loggedUserJSON);\r\n      setCurrentUser(userLoggedIn);\r\n      setToken(userLoggedIn.token);\r\n\r\n      //Get all other Users\r\n      usersService.getUsers({ username: userLoggedIn.username })\r\n        .then(userList => setUsers(userList));\r\n    } else {\r\n      alert(\"You must be logged in\");\r\n      history.push(\"/login\");\r\n    }\r\n  }, [history]);\r\n\r\n  //Function for Starting Chat\r\n  const startConversation = async (target) => {\r\n    setMessages([]);\r\n    setCurrentlySpeakingWith(target);\r\n    const participants = { usernames: [currentUser.username, target.username] };\r\n\r\n    const conversation = await messengerService.createConversation(participants)\r\n    setExistingChat(true);\r\n    setConversationID(conversation.id);\r\n\r\n    //Show old messages if available\r\n    if (conversation.messages) {\r\n      setMessages(conversation.messages);\r\n    }\r\n    const conversationInfo = { user: currentUser.username, target: target.username, id: conversation.id };\r\n    socket.emit(\"join\", conversationInfo);\r\n\r\n    //Toggle Panel for Mobile Users\r\n    toggleOpen();\r\n  }\r\n\r\n  //Get real-time message\r\n  useEffect(() => {\r\n    socket.on(\"message\", message => {\r\n      setMessages(messages => [...messages, message]);\r\n    });\r\n  }, []);\r\n\r\n  //Send user message to Server\r\n  const sendMessage = async (event) => {\r\n    event.preventDefault();\r\n    const message = text.trim();\r\n\r\n    //For socket messages\r\n    const messageToSend = { sender: { username: currentUser.username }, text: message };\r\n\r\n    if (message) {\r\n      const returnedMessage = await messengerService.saveMessage(currentConversationID, message);\r\n\r\n      socket.emit(\"sendMessage\", ({ currentConversationID, msg: messageToSend }), () => setText(\"\"));\r\n    }\r\n    setText(\"\");\r\n  }\r\n\r\n  return (\r\n    <Grid container className={classes.root}>\r\n      <Grid item xs={12} sm={4} md={3} className={open ? classes.closePanel : classes.openPanel}>\r\n        <UserPanel\r\n          currentUser={currentUser} setCurrentUser={setCurrentUser}\r\n          users={users} currentUser={currentUser} startConversation={startConversation} />\r\n      </Grid>\r\n      <Grid item sm={8} md={9} className={open ? classes.openPanel : classes.closePanel}>\r\n        {existingChat ?\r\n          <ChatContainer currentUser={currentUser} targetUser={currentlySpeakingWith} messages={messages} text={text} setText={setText} sendMessage={sendMessage} toggleOpen={toggleOpen} />\r\n          :\r\n          <Box className={classes.noChatContainer} >\r\n            <IoChatbubbleEllipsesSharp className={classes.noChatIcon} />\r\n            <Typography className={classes.noChatText} variant=\"h2\">No Active Chats yet!</Typography>\r\n          </Box>}\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default Messenger;","import React, { useState, useEffect } from \"react\";\r\nimport { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\r\nimport Register from \"./pages/Register/Register\";\r\nimport Login from \"./pages/Login/Login\";\r\nimport Messenger from \"./pages/Messenger/Messenger\";\r\nimport { setToken } from \"./helper/token\"\r\n\r\nconst App = () => {\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const loggedUserJSON = window.localStorage.getItem(\"userAuthenticated\");\r\n    if (loggedUserJSON) {\r\n      const userLoggedIn = JSON.parse(loggedUserJSON);\r\n      setCurrentUser(userLoggedIn);\r\n      setToken(userLoggedIn.token)\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <Switch>\r\n        <Route path=\"/register\" component={Register} />\r\n        <Route path=\"/login\" component={Login} />\r\n        <Route path=\"/messenger\">\r\n          <Messenger />\r\n        </Route>\r\n        <Route path=\"/\">\r\n          {currentUser ? <Redirect to=\"/messenger\" /> : <Register />}\r\n        </Route>\r\n      </Switch>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport { MuiThemeProvider } from \"@material-ui/core\";\r\nimport { theme } from \"./themes/theme\";\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <MuiThemeProvider theme={theme}>\r\n    <App />\r\n  </MuiThemeProvider>\r\n  , document.getElementById('root'));"],"sourceRoot":""}