(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{192:function(e,t,n){},247:function(e,t,n){"use strict";n.r(t);var a,r=n(2),c=n(0),s=n(14),i=n.n(s),o=(n(192),n(9)),l=n(321),u=n(54),j=n(17),d=n(170),b=Object(d.a)({typography:{fontFamily:"Open Sans",fontSize:18},palette:{primary:{main:"#1976d2"},secondary:{main:"#fff",contrastText:"#1976d2"}}}),h=n(307),g=n(327),x=n(305),m=n.p+"static/media/bg-img.0c5628a9.png",O=Object(x.a)((function(e){return{root:{height:"100vh"},paper:{marginTop:"15%",marginLeft:"15%",marginRight:"15%",display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},image:{background:"linear-gradient(180deg, rgba(58, 141, 255, 0.85), rgba(134, 185, 255, 0.85)), url(".concat(m,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},mainButton:{margin:e.spacing(7,0,2),padding:e.spacing(1,3)},secondaryButton:{margin:e.spacing(1,0,0),padding:e.spacing(1,2)},loginRegisterRedirect:{marginBottom:e.spacing(5),display:"flex",flexDirection:"horizontal",alignItems:"end",width:"100%"},loginRedirectText:{marginTop:e.spacing(2),color:"lightgrey"},backgroundImageText:{padding:e.spacing(0,"15%")}}})),p=n(107),f=n.n(p),v=n(87),y=n(323),w=n(331),C=n(112),S=n(309),k=function(){var e=O(),t=Object(j.g)();return Object(r.jsx)("div",{className:e.loginRegisterRedirect,children:Object(r.jsxs)(h.a,{container:!0,justify:"flex-end",spacing:2,children:[Object(r.jsx)(h.a,{item:!0,children:Object(r.jsx)(C.a,{className:e.loginRedirectText,variant:"subtitle1",children:"Already have an account?"})}),Object(r.jsx)(h.a,{item:!0,children:Object(r.jsx)(S.a,{id:"change-to-login-button",type:"button",variant:"contained",color:"secondary",size:"large",className:e.secondaryButton,onClick:function(){t.push("/login")},children:Object(r.jsx)("b",{children:"Login"})})})]})})},N=function(e){var t=e.createUser,n=Object(c.useState)(""),a=Object(o.a)(n,2),s=a[0],i=a[1],l=Object(c.useState)(""),u=Object(o.a)(l,2),j=u[0],d=u[1],b=Object(c.useState)(""),x=Object(o.a)(b,2),m=x[0],p=x[1],f=Object(c.useState)(""),N=Object(o.a)(f,2),I=N[0],T=N[1],B=Object(c.useState)(!1),R=Object(o.a)(B,2),U=R[0],z=R[1],D=Object(c.useState)({}),A=Object(o.a)(D,2),E=A[0],F=A[1],M=O(),L=function(e,t){z(!1)};return Object(r.jsxs)("div",{className:M.paper,children:[Object(r.jsx)(k,{}),Object(r.jsx)(h.a,{container:!0,alignContent:"flex-start",children:Object(r.jsx)(C.a,{component:"h1",variant:"h4",children:Object(r.jsx)("b",{children:"Create an account"})})}),Object(r.jsxs)("form",{className:M.form,onSubmit:function(e){e.preventDefault(),!function(){var e={};return e.username=s.length>2?"":"Minimum of 3 characters",e.password=m.length>5?"":"Minimum of 6 characters",e.email=/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9]+\.[A-Za-z]+$/.test(I)?"":"Email Format is xyz@xxx.xxx",F(Object(v.a)({},e)),Object.values(e).every((function(e){return""===e}))}()?z(!0):(t({username:s,name:j,email:I,password:m}),z(!1),i(""),d(""),T(""),p(""))},children:[Object(r.jsxs)(h.a,{container:!0,spacing:2,children:[Object(r.jsx)(h.a,{item:!0,xs:12,children:Object(r.jsx)(y.a,{value:s,label:"Username",id:"username",required:!0,fullWidth:!0,autoFocus:!0,onChange:function(e){i(e.target.value)},error:Boolean(E.username),helperText:E.username?E.username:""})}),Object(r.jsx)(h.a,{item:!0,xs:12,children:Object(r.jsx)(y.a,{value:j,label:"Name",id:"name",required:!0,fullWidth:!0,onChange:function(e){d(e.target.value)}})}),Object(r.jsx)(h.a,{item:!0,xs:12,children:Object(r.jsx)(y.a,{value:I,label:"E-mail Address",id:"email",required:!0,fullWidth:!0,onChange:function(e){T(e.target.value)},error:Boolean(E.email),helperText:E.email?E.email:""})}),Object(r.jsx)(h.a,{item:!0,xs:12,children:Object(r.jsx)(y.a,{value:m,type:"password",label:"Password",id:"password",required:!0,fullWidth:!0,onChange:function(e){p(e.target.value)},error:Boolean(E.password),helperText:E.password?E.password:""})})]}),Object(r.jsx)(h.a,{container:!0,justify:"center",children:Object(r.jsx)(h.a,{item:!0,children:Object(r.jsx)(S.a,{id:"create-button",type:"submit",variant:"contained",color:"primary",size:"large",className:M.mainButton,disableElevation:!0,children:Object(r.jsx)("b",{children:"Create"})})})})]}),Object(r.jsx)("div",{children:Object(r.jsx)(w.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:U,autoHideDuration:3e3,onClose:L,children:Object(r.jsx)(g.a,{onClose:L,severity:"error",children:"Please make sure all inputs are valid."})})})]})},I=n(26),T=n.n(I),B=n(43),R=n(59),U=n.n(R),z={create:function(){var e=Object(B.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.post("/register",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},D=n(324),A=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),i=Object(o.a)(s,2),l=i[0],u=i[1],d=Object(j.g)(),b=O();return Object(r.jsxs)(h.a,{container:!0,className:b.root,children:[Object(r.jsx)(h.a,{component:D.a,xs:!1,sm:5,className:b.image,display:{xs:"none",sm:"block"},children:Object(r.jsxs)(D.a,{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",children:[Object(r.jsx)(f.a,{className:b.backgroundImageText,color:"secondary",style:{fontSize:"90"}}),Object(r.jsx)("br",{}),Object(r.jsx)(C.a,{className:b.backgroundImageText,variant:"h4",color:"secondary",align:"center",children:Object(r.jsx)(D.a,{letterSpacing:2,lineHeight:1.5,children:"Converse with anyone at any moment"})})]})}),Object(r.jsxs)(h.a,{item:!0,xs:12,sm:7,children:[n&&Object(r.jsx)(g.a,{severity:"success",children:n}),l&&Object(r.jsx)(g.a,{severity:"error",children:l}),Object(r.jsx)(N,{createUser:function(e){z.create(e).then((function(e){a("Registration Successful! Welcome ".concat(e.name)),window.localStorage.setItem("userAuthenticated",JSON.stringify(e)),d.push("/messenger")})).catch((function(e){u("Something went wrong on our side. Please try again later")}))}})]})]})},E=function(){var e=O(),t=Object(j.g)();return Object(r.jsx)("div",{className:e.loginRegisterRedirect,children:Object(r.jsxs)(h.a,{container:!0,justify:"flex-end",spacing:2,children:[Object(r.jsx)(h.a,{item:!0,children:Object(r.jsx)(C.a,{className:e.loginRedirectText,variant:"subtitle1",children:"Don't have an account?"})}),Object(r.jsx)(h.a,{item:!0,children:Object(r.jsx)(S.a,{type:"button",variant:"contained",color:"secondary",size:"large",className:e.secondaryButton,onClick:function(){t.push("/register")},children:Object(r.jsx)("b",{children:"Create"})})})]})})},F=function(e){var t=e.loginUser,n=Object(c.useState)(""),a=Object(o.a)(n,2),s=a[0],i=a[1],l=Object(c.useState)(""),u=Object(o.a)(l,2),j=u[0],d=u[1],b=O();return Object(r.jsxs)("div",{className:b.paper,children:[Object(r.jsx)(E,{}),Object(r.jsx)(h.a,{container:!0,alignContent:"flex-start",children:Object(r.jsx)(C.a,{component:"h1",variant:"h4",fontWeight:"fontWeightBold",children:Object(r.jsx)("b",{children:"Welcome Back!"})})}),Object(r.jsxs)("form",{className:b.form,onSubmit:function(e){e.preventDefault(),t({email:s,password:j}),i(""),d("")},children:[Object(r.jsxs)(h.a,{container:!0,spacing:2,children:[Object(r.jsx)(h.a,{item:!0,xs:12,children:Object(r.jsx)(y.a,{value:s,id:"email",label:"E-mail",required:!0,fullWidth:!0,autoFocus:!0,onChange:function(e){i(e.target.value)}})}),Object(r.jsx)(h.a,{item:!0,xs:12,children:Object(r.jsx)(y.a,{value:j,id:"password",type:"password",label:"Password",required:!0,fullWidth:!0,onChange:function(e){d(e.target.value)}})})]}),Object(r.jsx)(h.a,{container:!0,justify:"center",children:Object(r.jsx)(h.a,{item:!0,children:Object(r.jsx)(S.a,{type:"submit",id:"login-button",variant:"contained",color:"primary",size:"large",className:b.mainButton,disableElevation:!0,children:Object(r.jsx)("b",{children:"Login"})})})})]})]})},M={login:function(){var e=Object(B.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.post("/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),i=Object(o.a)(s,2),l=i[0],u=i[1],d=Object(j.g)(),b=O();return Object(r.jsxs)(h.a,{container:!0,className:b.root,children:[Object(r.jsx)(h.a,{component:D.a,xs:!1,sm:5,className:b.image,display:{xs:"none",sm:"block"},children:Object(r.jsxs)(D.a,{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",children:[Object(r.jsx)(f.a,{className:b.backgroundImageText,color:"secondary",style:{fontSize:"90"}}),Object(r.jsx)("br",{}),Object(r.jsx)(C.a,{className:b.backgroundImageText,variant:"h4",color:"secondary",align:"center",children:Object(r.jsx)(D.a,{letterSpacing:2,lineHeight:1.5,children:"Converse with anyone at any moment"})})]})}),Object(r.jsxs)(h.a,{item:!0,xs:12,sm:7,children:[n&&Object(r.jsx)(g.a,{severity:"success",children:n}),l&&Object(r.jsx)(g.a,{severity:"error",children:l}),Object(r.jsx)(F,{loginUser:function(e){M.login(e).then((function(e){a("Login Successful! Redirecting to messager app"),window.localStorage.setItem("userAuthenticated",JSON.stringify(e)),d.push("/messenger")})).catch((function(e){u("Invalid Username or Password"),setTimeout((function(){u(null)}),5e3)}))}})]})]})},P=n(29),W=n(168),q=n.n(W),J=n(20),H="400px",Z=Object(x.a)((function(e){return{root:{display:"flex"},chatInput:{display:"flex",flexDirection:"horizontal",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},drawer:{width:H,flexShrink:0},drawerPaper:{width:H,overflowX:"hidden"},chatHeaderText:{margin:e.spacing(0,2,2,2)},searchBarContainer:{width:H,margin:e.spacing(0,2,2,2),backgroundColor:Object(J.c)(e.palette.primary.light,.25)},contentRight:{width:"calc(100vw - ".concat(H,")"),height:"100vh",display:"flex",background:"#F3F3F3",flexDirection:"column",justifyContent:"center",padding:e.spacing(0,2)},currentUserAvatarColor:{background:"linear-gradient(180deg, rgba(58, 141, 255, 0.85), rgba(134, 185, 255, 0.85))"},messageBox:{height:"85vh",padding:e.spacing(2)},sendingMessageContainer:{padding:e.spacing(2,3),display:"flex",justifyContent:"flex-end"},receivingMessageContainer:{padding:e.spacing(2,3),display:"flex",justifyContent:"flex-start"},sentMessageBackground:{backgroundColor:"#2979FF",color:"white",borderRadius:"20px",padding:e.spacing(2,5,2,4)},receivedMessageBackground:{background:"#F3F3F3",color:"black",borderRadius:"20px",padding:e.spacing(2,5,2,4)}}})),K=n(249),X=function(e){var t=e.currentUser,n=e.messages,a=e.text,c=e.setText,s=e.sendMessage,i=Z();return Object(r.jsxs)(K.a,{children:[Object(r.jsx)("div",{className:i.messageBox,children:n.map((function(e,n){return t.username==e.sender?Object(r.jsx)("div",{className:i.sendingMessageContainer,children:Object(r.jsxs)("div",{className:i.sentMessageBackground,children:[Object(r.jsxs)("b",{children:[e.sender,":"]})," ",e.text]})},n):Object(r.jsx)("div",{className:i.receivingMessageContainer,children:Object(r.jsxs)("div",{className:i.receivedMessageBackground,children:[Object(r.jsxs)("b",{children:[e.sender,":"]})," ",e.text]})},n)}))}),Object(r.jsx)("div",{children:Object(r.jsxs)("form",{autoComplete:"off",className:i.chatInput,onSubmit:s,children:[Object(r.jsx)(y.a,{value:a,variant:"outlined",fullWidth:!0,autoFocus:!0,onChange:function(e){e.preventDefault(),c(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?s(e):null}}),Object(r.jsx)(S.a,{disabled:""===a.trim(),type:"button",onClick:s,variant:"contained",color:"primary",size:"large",disableElevation:!0,children:"Send"})]})})]})},Y=n(313),$=n(314),_=n(335),G=function(e){var t=e.username,n=function(e,t,n){for(var a=0,r=0;r<e.length;r++)a=e.charCodeAt(r)+((a<<5)-a);return"hsl(".concat(a%360,", ").concat(t,"%, ").concat(n,"%)")}(t,50,80),a=Object(x.a)((function(){return{userListItem:{width:"100%",cursor:"pointer"},avatarColor:{background:"".concat(n),width:"50px",height:"50px"}}}))();return Object(r.jsx)(Y.a,{className:a.userListItem,style:{height:"100px",paddingTop:"8px",borderBottom:"solid",borderWidth:"2px",borderBottomColor:"rgba(230, 230, 230, 0.5)",borderRadius:"2px",marginBottom:"-15px"},elevation:0,children:Object(r.jsx)($.a,{avatar:Object(r.jsx)(_.a,{className:a.avatarColor,"aria-label":"users",children:t.substring(0,1).toUpperCase()}),title:Object(r.jsx)("b",{children:t})})})},Q=n(315),V=n(311),ee=function(e){var t=e.users,n=e.filterUser,a=e.startConversation;return Object(r.jsx)(V.a,{children:t?t.reduce((function(e,t){return t.username.toLowerCase().includes(n.toLowerCase())?[].concat(Object(P.a)(e),[Object(r.jsx)(Q.a,{onClick:function(){return a(t)},children:Object(r.jsx)(G,{username:t.username})},t.id)]):e}),[]):null})},te=n(312),ne=n(334),ae=n(169),re=n.n(ae),ce=function(e){var t=e.name,n=e.handler;return Object(r.jsxs)(K.a,{style:{background:"rgba(163, 198, 255, 0.3)",height:65,width:350,display:"flex",alignItems:"center",marginLeft:"16px"},sx:{height:300},elevation:0,children:[Object(r.jsx)(te.a,{sx:{p:"10px"},"aria-label":"search",disabled:"true",children:Object(r.jsx)(re.a,{})}),Object(r.jsx)(ne.a,{placeholder:"Search",id:"search-bar",inputProps:{"aria-label":"Search"},value:t,onChange:n})]})},se=function(e){var t=e.users,n=e.startConversation,a=Object(c.useState)(""),s=Object(o.a)(a,2),i=s[0],l=s[1],u=Z();return Object(r.jsxs)("div",{children:[Object(r.jsx)(C.a,{className:u.chatHeaderText,variant:"h4",style:{marginBottom:10},children:"Chats"}),Object(r.jsx)(ce,{name:i,handler:function(e){l(e.target.value)}}),Object(r.jsx)(ee,{users:t,filterUser:i,startConversation:n})]})},ie={getUsers:function(){var e=Object(B.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.post("/users",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},oe={createConversation:function(){var e=Object(B.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.post("/messages",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){"bearer ".concat(e)}},le=n(109),ue=n.n(le),je=n(333),de=n(320),be=n(338),he=n(339),ge=n(322),xe=n(329),me=n(328),Oe=function(e){var t=e.setUser,n=Object(c.useState)(!1),a=Object(o.a)(n,2),s=a[0],i=a[1],l=Object(c.useRef)(null),u=function(e){i(!1)},d=function(e){"Tab"===e.key?(e.preventDefault(),i(!1)):"Escape"===e.key&&i(!1)},b=Object(j.g)(),h=function(e){window.localStorage.removeItem("userAuthenticated"),b.push("/register"),t(null)},g=Object(c.useRef)(s);return Object(c.useEffect)((function(){!0===g.current&&!1===s&&l.current.focus(),g.current=s}),[s]),Object(r.jsxs)("div",{children:[Object(r.jsx)(je.a,{ref:l,id:"show-account-setting",onClick:function(){i((function(e){return!e}))},size:"large",startIcon:Object(r.jsx)(ue.a,{})}),Object(r.jsx)(ge.a,{open:s,anchorEl:l.current,placement:"bottom-start",transition:!0,disablePortal:!0,children:function(e){var t=e.TransitionProps,n=e.placement;return Object(r.jsx)(be.a,Object(v.a)(Object(v.a)({},t),{},{style:{transformOrigin:"bottom-start"===n?"left top":"left bottom"},children:Object(r.jsx)(he.a,{children:Object(r.jsx)(de.a,{onClickAway:u,children:Object(r.jsx)(me.a,{autoFocusItem:s,onKeyDown:d,children:Object(r.jsx)(xe.a,{id:"logout-button",onClick:h,children:"Logout"})})})})}))}})]})},pe=function(e){var t=e.currentUser,n=e.setUser,a=Z();return Object(r.jsxs)(D.a,{display:"flex",alignItems:"center",flexDirection:"row",style:{width:"100%",margin:20},children:[Object(r.jsx)(_.a,{className:a.currentUserAvatarColor,style:{width:"60px",height:"60px",marginLeft:5,marginRight:24}}),Object(r.jsx)(C.a,{style:{marginRight:6},children:Object(r.jsx)("b",{children:t?t.username:"None"})}),Object(r.jsx)(Oe,{size:"small",startIcon:Object(r.jsx)(ue.a,{}),setUser:n})]})},fe=n(330),ve=n(332),ye=function(){var e=Object(j.g)(),t=Z(),n=Object(c.useState)(""),s=Object(o.a)(n,2),i=s[0],l=s[1],u=Object(c.useState)(!1),d=Object(o.a)(u,2),b=d[0],h=d[1],g=Object(c.useState)(null),x=Object(o.a)(g,2),m=x[0],O=x[1],p=Object(c.useState)([]),f=Object(o.a)(p,2),v=f[0],y=f[1],w=Object(c.useState)(""),C=Object(o.a)(w,2),S=C[0],k=C[1],N=Object(c.useState)([]),I=Object(o.a)(N,2),R=I[0],U=I[1];Object(c.useEffect)((function(){a=q()();var t=window.localStorage.getItem("userAuthenticated");if(t){var n=JSON.parse(t);O(n),ie.getUsers({username:n.username}).then((function(e){return y(e)}))}else alert("You must be logged in"),e.push("/login")}),[e]);var z=function(){var e=Object(B.a)(T.a.mark((function e(t){var n,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U([]),n={usernames:[m.username,t.username]},e.next=4,oe.createConversation(n);case 4:r=e.sent,h(!0),l(r.id),r.messages&&U(r.messages),c={user:m.username,target:t.username,id:r.id},a.emit("join",c);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){a.on("message",(function(e){U((function(t){return[].concat(Object(P.a)(t),[e])}))}))}),[]);return Object(r.jsxs)("div",{className:t.root,children:[Object(r.jsx)("div",{className:t.drawer,children:Object(r.jsxs)(fe.a,{variant:"permanent",anchor:"left",classes:{paper:t.drawerPaper},children:[Object(r.jsx)(pe,{currentUser:m,setUser:O}),Object(r.jsx)(se,{className:t.userListContainer,users:v,currentUser:m,startConversation:z})]})}),Object(r.jsx)("div",{bordertop:1,className:t.contentRight,children:b?Object(r.jsx)(X,{currentUser:m,messages:R,text:S,setText:k,sendMessage:function(e){e.preventDefault();var t=S.trim(),n={sender:m.username,text:t};n&&a.emit("sendMessage",{currentConversationID:i,msg:n},(function(){return k("")})),k("")}}):Object(r.jsx)(ve.a,{})})]})},we=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){var e=window.localStorage.getItem("userAuthenticated");if(e){var t=JSON.parse(e);a(t),oe.setToken(t.token)}}),[]),Object(r.jsx)(l.a,{theme:b,children:Object(r.jsx)(u.a,{children:Object(r.jsxs)(j.d,{children:[Object(r.jsx)(j.b,{path:"/register",component:A}),Object(r.jsx)(j.b,{path:"/login",component:L}),Object(r.jsx)(j.b,{path:"/messenger",children:Object(r.jsx)(ye,{})}),Object(r.jsx)(j.b,{path:"/",children:n?Object(r.jsx)(j.a,{to:"/messenger"}):Object(r.jsx)(A,{})})]})})})};i.a.render(Object(r.jsx)(we,{}),document.getElementById("root"))}},[[247,1,2]]]);
//# sourceMappingURL=main.aa29bf28.chunk.js.map