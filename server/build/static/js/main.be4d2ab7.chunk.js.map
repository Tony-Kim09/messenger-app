{"version":3,"sources":["pages/Messenger.js","themes/theme.js","assets/bg-img.png","themes/loginAndRegister.js","components/RegisterForm/LoginRedirect.js","components/RegisterForm/RegisterForm.js","services/register.js","pages/Register.js","components/LoginForm/RegisterRedirect.js","components/LoginForm/LoginForm.js","services/login.js","pages/Login.js","themes/messengerStyle.js","components/ChatBox.js","components/LogoutButton.js","components/UserPanel/User.js","components/UserPanel/UserList.js","components/UserPanel/FilterContacts/FilterInput.js","components/UserPanel/UserPanel.js","services/users.js","services/messenger.js","components/UserPanel/CurrentUserBox.js","App.js","index.js"],"names":["socket","theme","createMuiTheme","typography","fontFamily","fontSize","palette","primary","main","secondary","contrastText","loginRegisterStyles","makeStyles","root","height","paper","marginTop","marginLeft","marginRight","display","flexDirection","alignItems","form","width","spacing","image","background","bgImage","backgroundRepeat","backgroundSize","backgroundPosition","mainButton","margin","padding","secondaryButton","loginRegisterRedirect","marginBottom","loginRedirectText","color","backgroundImageText","RedirectToLogin","classes","history","useHistory","className","Grid","container","justify","item","Typography","variant","Button","type","size","onClick","push","RegisterForm","createUser","useState","username","setUserName","nickName","setNickName","password","setPassword","email","setEmail","showSnackbar","setShowSnackBar","errorMessage","setErrorMessage","handleCloseSnack","event","reason","LoginRedirect","alignContent","component","onSubmit","preventDefault","errors","length","test","Object","values","every","n","validate","name","xs","TextField","value","label","required","fullWidth","autoFocus","onChange","target","error","Boolean","helperText","disableElevation","Snackbar","anchorOrigin","vertical","horizontal","open","autoHideDuration","onClose","Alert","severity","registerService","create","credentials","a","axios","post","response","data","Register","message","setMessage","useStyle","Box","sm","justifyContent","style","align","letterSpacing","lineHeight","userObject","then","returnedUser","window","localStorage","setItem","JSON","stringify","catch","RedirectToRegister","LoginForm","loginUser","RegisterRedirect","fontWeight","loginService","login","Login","setTimeout","messengerStyle","userListItem","messageBox","chatInput","drawer","flexShrink","drawerPaper","searchBarContainer","contentRight","flexGrow","ChatBox","messages","text","setText","sendMessage","Paper","map","i","sender","autoComplete","onKeyPress","key","disabled","trim","LogoutButton","setUser","removeItem","User","Card","CardHeader","avatar","Avatar","aria-label","substring","title","UserList","users","filterUser","startConversation","List","reduce","acc","cur","includes","ListItem","id","Filter","handler","useStyles","InputProps","startAdornment","InputAdornment","position","UserPanel","filteredName","setFilter","FilterInput","usersService","getUsers","messengerService","createConversation","usernames","setToken","newToken","CurrentUserBox","currentUser","startIcon","Messenger","currentConversationID","setConversationID","existingChat","setExistingChat","setCurrentUser","setUsers","setMessages","useEffect","io","loggedUserJSON","getItem","userLoggedIn","parse","userList","alert","participants","conversation","conversationInfo","user","emit","on","Drawer","anchor","borderTop","trimmedText","msg","App","token","path","to","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.be4d2ab7.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport io from \"socket.io-client\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport useStyle from \"../themes/messengerStyle\";\r\nimport ChatBox from \"../components/ChatBox\";\r\nimport LogoutButton from \"../components/LogoutButton\";\r\nimport UserPanel from \"../components/UserPanel/UserPanel\";\r\nimport usersService from \"../services/users\";\r\nimport messengerService from \"../services/messenger\";\r\nimport CurrentUserBox from \"../components/UserPanel/CurrentUserBox\";\r\nimport { Box, Drawer } from \"@material-ui/core\";\r\n\r\nlet socket;\r\n\r\nconst Messenger = () => {\r\n  const history = useHistory();\r\n  const classes = useStyle();\r\n\r\n  const [currentConversationID, setConversationID] = useState(\"\");\r\n  const [existingChat, setExistingChat] = useState(false);\r\n\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [users, setUsers] = useState([]);\r\n  const [text, setText] = useState(\"\");\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  //Initialize SocketIO and users\r\n  useEffect(()=> {\r\n    socket = io();\r\n    const loggedUserJSON = window.localStorage.getItem(\"userAuthenticated\");\r\n    if (loggedUserJSON) {\r\n    // Set Current User \r\n      const userLoggedIn = JSON.parse(loggedUserJSON);\r\n      setCurrentUser(userLoggedIn);\r\n\r\n    //Set all current Users\r\n    usersService.getUsers({username: userLoggedIn.username})\r\n                .then( userList => setUsers(userList));\r\n    } else {\r\n      alert(\"You must be logged in\");\r\n      history.push(\"/login\");\r\n    }\r\n  }, [history]);\r\n\r\n  //Function for Starting Chat\r\n  const startConversation = async (target) => {\r\n    setMessages([]);\r\n    const participants = { usernames: [currentUser.username, target.username]};\r\n\r\n    const conversation = await messengerService.createConversation(participants)\r\n    setExistingChat(true);\r\n    setConversationID(conversation.id);\r\n\r\n    //Show old messages if available\r\n    if (conversation.messages){\r\n      setMessages(conversation.messages);\r\n    }\r\n    const conversationInfo = {user: currentUser.username, target: target.username, id: conversation.id};\r\n    socket.emit(\"join\", conversationInfo);\r\n  }\r\n\r\n  //Get real-time message\r\n  useEffect(()=> {\r\n    socket.on(\"message\", message => {\r\n      setMessages(messages => [...messages, message]);\r\n    });\r\n  }, []);\r\n\r\n  //Send user message to Server\r\n  const sendMessage = (event) => {\r\n    event.preventDefault();\r\n    const trimmedText = text.trim();\r\n    const msg = { sender: currentUser.username, text: trimmedText };\r\n\r\n    if(msg){\r\n      socket.emit(\"sendMessage\", ({currentConversationID, msg}), () => setText(\"\"));\r\n    }\r\n    setText(\"\");\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <nav className={classes.drawer}>\r\n        <Drawer\r\n          variant=\"permanent\"\r\n          anchor=\"left\"\r\n          classes={{paper: classes.drawerPaper}}>\r\n          <CurrentUserBox currentUser={currentUser}/>\r\n          <UserPanel users={users} currentUser={currentUser} startConversation={startConversation} />\r\n        </Drawer>\r\n      </nav>\r\n      <div borderTop={1} className={classes.contentRight}>\r\n        <LogoutButton setUser={setCurrentUser}/>\r\n            {existingChat ? <ChatBox messages={messages} text={text} setText={setText} sendMessage={sendMessage} />\r\n                              : null}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Messenger;","import { createMuiTheme } from \"@material-ui/core\";\r\n\r\nexport const theme = createMuiTheme({\r\n  typography: {\r\n    fontFamily: \"Open Sans\",\r\n    fontSize: 16,\r\n\r\n  },\r\n  palette: {\r\n    primary: { main: \"#1976d2\" },\r\n    secondary: { main: \"#fff\", contrastText: \"#1976d2\"},\r\n  }\r\n});","export default __webpack_public_path__ + \"static/media/bg-img.0c5628a9.png\";","import { makeStyles } from \"@material-ui/core/styles\";\r\nimport bgImage from \"../assets/bg-img.png\";\r\n\r\n//Styling for Login and Registration Page\r\nconst loginRegisterStyles = makeStyles((theme) => ({\r\n    root: {\r\n      height: \"100vh\",\r\n    },\r\n    paper: {\r\n      marginTop: \"15%\",\r\n      marginLeft: \"15%\",\r\n      marginRight: \"15%\",\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      alignItems: \"center\",\r\n    },\r\n    form: {\r\n      width: \"100%\",\r\n      marginTop: theme.spacing(3),\r\n    },\r\n    image: {\r\n      background: `linear-gradient(180deg, rgba(58, 141, 255, 0.85), rgba(134, 185, 255, 0.85)), url(${bgImage})`,\r\n      backgroundRepeat: \"no-repeat\",\r\n      backgroundSize: \"cover\",\r\n      backgroundPosition: \"center\"\r\n    },\r\n    mainButton: {\r\n      margin: theme.spacing(7, 0, 2),\r\n      padding: theme.spacing(1, 3)\r\n    },\r\n    secondaryButton: {\r\n      margin: theme.spacing(1, 0, 0),\r\n      padding: theme.spacing(1, 2),\r\n    },\r\n    loginRegisterRedirect: {\r\n        marginBottom: theme.spacing(5),\r\n        display: \"flex\",\r\n        flexDirection: \"horizontal\",\r\n        alignItems: \"end\",   \r\n        width: \"100%\"\r\n    },\r\n    loginRedirectText: {\r\n      marginTop: theme.spacing(2),\r\n      color: \"lightgrey\"\r\n    },\r\n    backgroundImageText: {\r\n      padding: theme.spacing(0, \"15%\")\r\n    }\r\n\r\n}));\r\n\r\nexport default loginRegisterStyles;","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\"\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport loginRegisterStyles from \"../../themes/loginAndRegister\";\r\n\r\nconst RedirectToLogin = () => {\r\n  const classes = loginRegisterStyles();\r\n  const history = useHistory();\r\n\r\n  const redirectButton = () => {\r\n    history.push(\"/login\");\r\n  }\r\n\r\n  return (\r\n    <div className={classes.loginRegisterRedirect}>\r\n      <Grid container justify=\"flex-end\" spacing={2}>\r\n        <Grid item>\r\n          <Typography className={classes.loginRedirectText} variant=\"subtitle1\">\r\n          Already have an account?\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          size=\"large\"\r\n          className={classes.secondaryButton}\r\n          onClick={redirectButton}\r\n        >\r\n          <b>Login</b>\r\n        </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RedirectToLogin;","import React, { useState} from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { Alert } from \"@material-ui/lab\";\r\n\r\nimport loginRegisterStyles from \"../../themes/loginAndRegister\";\r\nimport LoginRedirect from \"./LoginRedirect\";\r\n\r\n//createUser props will be the axios post call that will take user object created here as parameter\r\nconst RegisterForm = ({ createUser }) => {\r\n\r\n  const [username, setUserName] = useState(\"\");\r\n  const [nickName, setNickName] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n\r\n  const [showSnackbar, setShowSnackBar] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState( { });\r\n  const classes = loginRegisterStyles();\r\n\r\n  const validate = () => {\r\n    let errors = {};\r\n    errors.username = username.length > 2 ? \"\" : \"Minimum of 3 characters\";\r\n    errors.password = password.length > 5 ? \"\" : \"Minimum of 6 characters\";\r\n    errors.email = (/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9]+\\.[A-Za-z]+$/.test(email)) ? \"\" : \"Email Format is xyz@xxx.xxx\";\r\n    setErrorMessage({ ...errors });\r\n\r\n    return Object.values(errors).every(n => n === \"\");\r\n  }\r\n\r\n  const handleUsernameChange = (event) => {\r\n    setUserName(event.target.value);\r\n  }\r\n  const handleNickNameChange = (event) => {\r\n    setNickName(event.target.value);\r\n  }\r\n  const handlePasswordChange = (event) => {\r\n    setPassword(event.target.value);\r\n  }\r\n  const handleEmailChange = (event) => {\r\n    setEmail(event.target.value);\r\n  }\r\n  const handleCloseSnack = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n    setShowSnackBar(false);\r\n  };\r\n\r\n  const registerUser = (event) => {\r\n    event.preventDefault();\r\n\r\n    //Only send request when all validations are passed\r\n    if (validate()) {\r\n      createUser({\r\n        username: username,\r\n        name: nickName,\r\n        email: email,\r\n        password: password\r\n      })\r\n      setShowSnackBar(false);\r\n      setUserName(\"\");\r\n      setNickName(\"\");\r\n      setEmail(\"\");\r\n      setPassword(\"\");\r\n    } else {\r\n      setShowSnackBar(true);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={classes.paper}>\r\n      <LoginRedirect/>\r\n      <Grid container alignContent=\"flex-start\">\r\n          <Typography component=\"h1\" variant=\"h4\">\r\n              <b>Create an account</b>\r\n          </Typography>\r\n      </Grid>\r\n      <form className={classes.form} onSubmit={registerUser}>\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={12}>\r\n              <TextField\r\n              value={username}\r\n              label=\"Username\"\r\n              required\r\n              fullWidth\r\n              autoFocus\r\n              onChange={handleUsernameChange}\r\n              error={Boolean(errorMessage.username)}\r\n              helperText={errorMessage.username ? errorMessage.username : \"\"}\r\n              />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n              <TextField\r\n              value={nickName}\r\n              label=\"Name\"\r\n              required\r\n              fullWidth\r\n              onChange={handleNickNameChange}\r\n              />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n              <TextField\r\n              value={email}\r\n              label=\"E-mail Address\"\r\n              required\r\n              fullWidth\r\n              onChange={handleEmailChange}\r\n              error={Boolean(errorMessage.email)}\r\n              helperText={errorMessage.email ? errorMessage.email : \"\"}\r\n              />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n              <TextField\r\n              value={password}\r\n              type=\"password\"\r\n              label=\"Password\"\r\n              required\r\n              fullWidth\r\n              onChange={handlePasswordChange}\r\n              error={Boolean(errorMessage.password)}\r\n              helperText={errorMessage.password? errorMessage.password : \"\"}\r\n              />\r\n          </Grid>\r\n          </Grid>\r\n          <Grid container justify=\"center\">\r\n              <Grid item>\r\n                <Button\r\n                type=\"submit\"\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                size=\"large\"\r\n                className={classes.mainButton}\r\n                disableElevation\r\n                >\r\n                  <b>\r\n                    Create\r\n                  </b>\r\n                </Button>\r\n            </Grid>\r\n        </Grid>\r\n      </form>\r\n      <div>\r\n        <Snackbar anchorOrigin={{ vertical: \"top\", horizontal: \"right\"}} open = {showSnackbar} autoHideDuration={3000} onClose={handleCloseSnack}>\r\n          <Alert onClose={handleCloseSnack} severity=\"error\">\r\n            Please make sure all inputs are valid.\r\n          </Alert>\r\n        </Snackbar>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RegisterForm;","import axios from \"axios\"; \r\n\r\nconst baseUrl = \"/register\";\r\n\r\nconst create = async credentials => {\r\n  const response = await axios.post(baseUrl, credentials);\r\n  \r\n  return response.data;\r\n}\r\n\r\nconst registerService = {\r\n  create\r\n};\r\nexport default registerService;","import React, {useState} from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport useStyle from \"../themes/loginAndRegister\";\r\nimport TextsmsOutlinedIcon from '@material-ui/icons/TextsmsOutlined';\r\nimport RegistrationForm from \"../components/RegisterForm/RegisterForm\";\r\nimport registerService from \"../services/register\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\n\r\nconst Register = () => {\r\n    const [message, setMessage] = useState(\"\");\r\n    const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n    const history = useHistory();\r\n    const classes = useStyle();\r\n\r\n    const createUser = (userObject) => {\r\n     registerService.create(userObject)\r\n                    .then(returnedUser => {\r\n                        setMessage(`Registration Successful! Welcome ${returnedUser.name}`);\r\n\r\n                        window.localStorage.setItem(\r\n                            \"userAuthenticated\", JSON.stringify(returnedUser)\r\n                        );\r\n\r\n                        history.push(\"/messenger\");\r\n                    })\r\n                    .catch(error => {\r\n                        setErrorMessage(\"Something went wrong on our side. Please try again later\");\r\n                    })\r\n    }\r\n\r\n    return (\r\n        <Grid container className={classes.root}>\r\n            <Grid component={Box} xs={false} sm={5} className={classes.image} display={{ xs: \"none\", sm: \"block\" }}>\r\n                <Box width=\"100%\" height=\"100%\" display=\"flex\" alignItems=\"center\" justifyContent=\"center\" flexDirection=\"column\">\r\n                    <TextsmsOutlinedIcon className={classes.backgroundImageText} color=\"secondary\" style={ { fontSize: \"90\" }} />\r\n                    <br/>\r\n                    <Typography className={classes.backgroundImageText} variant=\"h4\" color=\"secondary\" align=\"center\">\r\n                        <Box letterSpacing={2} lineHeight={1.5}>\r\n                            Converse with anyone at any moment\r\n                        </Box>\r\n                    </Typography>\r\n                </Box>\r\n            </Grid>\r\n            <Grid item xs={12} sm={7}>\r\n                {(message && \r\n                    <Alert severity=\"success\">\r\n                        {message}    \r\n                    </Alert>\r\n                )}\r\n                {(errorMessage && \r\n                    <Alert severity=\"error\">\r\n                        {errorMessage}\r\n                    </Alert>\r\n                )}\r\n                <RegistrationForm createUser={createUser} /> \r\n            </Grid>\r\n        </Grid>\r\n    );\r\n}\r\n\r\nexport default Register;","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport loginRegisterStyles from \"../../themes/loginAndRegister\";\r\n\r\nconst RedirectToRegister = () => {\r\n  const classes = loginRegisterStyles();\r\n  const history = useHistory();\r\n\r\n  const redirectButton = () => {\r\n    history.push(\"/register\");\r\n  }\r\n\r\n  return (\r\n    <div className={classes.loginRegisterRedirect}>\r\n      <Grid container justify=\"flex-end\" spacing={2}>\r\n        <Grid item>\r\n          <Typography className={classes.loginRedirectText} variant=\"subtitle1\">\r\n          Don't have an account?\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Button\r\n              type=\"button\"\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n              className={classes.secondaryButton}\r\n              onClick={redirectButton}\r\n              >\r\n              <b>Create</b>\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RedirectToRegister;","import React, { useState} from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nimport loginRegisterStyles from \"../../themes/loginAndRegister\";\r\nimport RegisterRedirect from \"./RegisterRedirect\";\r\n\r\n//loginUser props will be the axios post call that will take user object created here as parameter\r\nconst LoginForm = ({ loginUser }) => {\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const classes = loginRegisterStyles();\r\n\r\n  const handleEmailChange = (event) => {\r\n    setEmail(event.target.value);\r\n  }\r\n  const handlePasswordChange = (event) => {\r\n    setPassword(event.target.value);\r\n  }\r\n\r\n  const submitUser = (event) => {\r\n    event.preventDefault();\r\n\r\n      loginUser({\r\n        email: email,\r\n        password: password\r\n      })\r\n      setEmail(\"\");\r\n      setPassword(\"\");\r\n  }\r\n\r\n  return (\r\n    <div className={classes.paper}>\r\n      <RegisterRedirect />\r\n      <Grid container alignContent=\"flex-start\" >\r\n          <Typography component=\"h1\" variant=\"h4\" fontWeight=\"fontWeightBold\">\r\n              <b>Welcome Back!</b>\r\n          </Typography>\r\n      </Grid>\r\n      <form className={classes.form} onSubmit={submitUser}>\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={12}>\r\n              <TextField\r\n              value={email}\r\n              label=\"E-mail\"\r\n              required\r\n              fullWidth\r\n              autoFocus\r\n              onChange={handleEmailChange}\r\n              />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n              <TextField\r\n              value={password}\r\n              type=\"password\"\r\n              label=\"Password\"\r\n              required\r\n              fullWidth\r\n              onChange={handlePasswordChange}\r\n              />\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container justify=\"center\">\r\n            <Grid item>\r\n              <Button\r\n              type=\"submit\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              size=\"large\"\r\n              className={classes.mainButton}\r\n              disableElevation\r\n              >\r\n              <b>Login</b>\r\n              </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginForm;","import axios from \"axios\"; \r\n\r\nconst baseUrl = \"/login\";\r\n\r\nconst login = async credentials => {\r\n  const response = await axios.post(baseUrl, credentials);\r\n  \r\n  return response.data;\r\n}\r\n\r\nconst loginService = {\r\n  login\r\n};\r\nexport default loginService;","import React, {useState} from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport TextsmsOutlinedIcon from '@material-ui/icons/TextsmsOutlined';\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport LoginForm from \"../components/LoginForm/LoginForm\";\r\nimport loginService from \"../services/login\";\r\nimport useStyle from \"../themes/loginAndRegister\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nconst Login = () => {\r\n    const [message, setMessage] = useState(\"\");\r\n    const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n    const history = useHistory();\r\n    const classes = useStyle();\r\n\r\n    const loginUser = (userObject) => {\r\n        loginService.login(userObject)\r\n                    .then(returnedUser => {\r\n                        setMessage(`Login Successful! Redirecting to messager app`);\r\n\r\n                        window.localStorage.setItem(\r\n                            \"userAuthenticated\", JSON.stringify(returnedUser)\r\n                        );\r\n                        history.push(\"/messenger\");\r\n                    })\r\n                    .catch(error => {\r\n                        setErrorMessage(\"Invalid Username or Password\");\r\n                        setTimeout(() => {\r\n                            setErrorMessage(null);\r\n                          }, 5000)\r\n                    })\r\n    }\r\n\r\n    return (\r\n        <Grid container className={classes.root}>\r\n            <Grid component={Box} xs={false} sm={5} className={classes.image} display={{ xs: \"none\", sm: \"block\" }}>\r\n                <Box width=\"100%\" height=\"100%\" display=\"flex\" alignItems=\"center\" justifyContent=\"center\" flexDirection=\"column\">\r\n                    <TextsmsOutlinedIcon className={classes.backgroundImageText} color=\"secondary\" style={{ fontSize: \"90\" }} />\r\n                    <br/>\r\n                    <Typography className={classes.backgroundImageText} variant=\"h4\" color=\"secondary\" align=\"center\">\r\n                        <Box letterSpacing={2} lineHeight={1.5}>\r\n                             Converse with anyone at any moment\r\n                        </Box>\r\n                    </Typography>\r\n                </Box>\r\n            </Grid>\r\n            <Grid item xs={12} sm={7}>\r\n                {(message && \r\n                    <Alert severity=\"success\">\r\n                        {message}    \r\n                    </Alert>\r\n                )}\r\n                {(errorMessage && \r\n                    <Alert severity=\"error\">\r\n                        {errorMessage}\r\n                    </Alert>\r\n                )}\r\n                <LoginForm loginUser={loginUser} />    \r\n            </Grid>\r\n        </Grid>\r\n    );\r\n}\r\n\r\nexport default Login;","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst DRAWER_WIDTH = 280;\r\n\r\nconst messengerStyle = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\"\r\n  },\r\n  userListItem: {\r\n    width: \"100%\"\r\n  },\r\n  messageBox: {\r\n    height: \"85vh\"\r\n  },\r\n  chatInput:{\r\n    display: \"flex\",\r\n    flexDirection: \"horizontal\",\r\n    alignItems: \"center\",\r\n  },\r\n  form: {\r\n    width: \"100%\",\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  drawer: {\r\n    width: DRAWER_WIDTH,\r\n    flexShrink: 0\r\n  },\r\n  drawerPaper: {\r\n    width: DRAWER_WIDTH\r\n  },\r\n  searchBarContainer: {\r\n    margin: theme.spacing (0, 2, 2, 2)\r\n  },\r\n  contentRight: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(3)\r\n  }\r\n}));\r\n\r\nexport default messengerStyle;","import React from \"react\";\r\nimport useStyle from \"../themes/messengerStyle\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { Paper } from \"@material-ui/core\";\r\n\r\nconst ChatBox = ({messages, text, setText, sendMessage}) => {\r\n  const classes = useStyle();\r\n  \r\n  const handleText = (event) => {\r\n    event.preventDefault(); \r\n    setText(event.target.value);\r\n  }\r\n\r\n  return (\r\n    <Paper>\r\n      <div className={classes.messageBox}> \r\n        {messages.map((message, i) => <div key={i}><b>{message.sender}:</b> {message.text}</div>)}\r\n      </div>\r\n      <div>\r\n        <form autoComplete=\"off\" className={classes.chatInput} onSubmit={sendMessage}>\r\n            <TextField\r\n              value={text}\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              autoFocus\r\n              onChange={handleText}\r\n              onKeyPress={event => event.key === \"Enter\" ? sendMessage(event) : null}/>\r\n            <Button\r\n            disabled={text.trim() === \"\"}\r\n            type=\"button\"\r\n            onClick={sendMessage}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            disableElevation\r\n            >\r\n            Send\r\n            </Button>\r\n        </form>\r\n      </div>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nexport default ChatBox;","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\n\r\nconst LogoutButton = ({setUser}) => {\r\n  const history = useHistory();\r\n\r\n  const handleLogOut = (event) => {\r\n    window.localStorage.removeItem(\"userAuthenticated\");\r\n    history.push(\"/register\");\r\n    setUser(null);\r\n  }\r\n  \r\n  return (\r\n    <Button\r\n    type=\"button\"\r\n    variant=\"contained\"\r\n    color=\"primary\"\r\n    onClick={handleLogOut}\r\n  >\r\n  LogOut\r\n  </Button>\r\n  );\r\n}\r\n\r\nexport default LogoutButton;","import React from \"react\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from \"@material-ui/core/CardHeader\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport useStyle from \"../../themes/messengerStyle\"\r\n\r\nconst User = ({username}) => {\r\n\r\n  const classes = useStyle();\r\n  \r\n  return (\r\n    <Card className={classes.userListItem}>\r\n      <CardHeader\r\n        avatar={\r\n          <Avatar aria-label=\"users\">\r\n            {username.substring(0, 1)}\r\n          </Avatar>\r\n        }  \r\n        title={<b>{username}</b>}\r\n      />\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default User;","import React from \"react\";\r\nimport User from \"./User\";\r\nimport { List, ListItem } from \"@material-ui/core\";\r\n\r\nconst UserList = ({users, filterUser, startConversation}) => {\r\n\r\n  const reduceUsers = (acc, cur) => {\r\n    if (cur.username.includes(filterUser)){\r\n      return [...acc, \r\n        <ListItem key={cur.id} onClick={() => startConversation(cur)}>\r\n         <User username={cur.username}/>\r\n        </ListItem>\r\n      ];\r\n    }\r\n    return acc;\r\n  }\r\n\r\n  return (\r\n     <List>\r\n       {users ? users.reduce(reduceUsers, []) : null}\r\n     </List>\r\n  )\r\n}\r\n\r\nexport default UserList;","import React from \"react\"\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { InputAdornment, makeStyles, Typography } from \"@material-ui/core\";\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport useStyles from \"../../../themes/messengerStyle\"\r\n\r\nconst Filter = ({name, handler}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.searchBarContainer}>\r\n          <Typography variant=\"h4\" style={{marginBottom: 10}} >Chats</Typography>\r\n          <TextField label=\"Search\" variant=\"filled\" value={name} onChange={handler} color=\"primary\"\r\n          style={{\r\n            background: \"rgba(122, 188, 255, 0.3)\"\r\n          }}\r\n          InputProps={{\r\n            startAdornment: (\r\n              <InputAdornment position=\"start\">\r\n                <SearchIcon/>\r\n              </InputAdornment>\r\n            ),\r\n            }}/>\r\n        </div>\r\n    )\r\n  }\r\n\r\nexport default Filter;","import UserList from \"./UserList\";\r\nimport FilterInput from \"./FilterContacts/FilterInput\";\r\nimport React, { useState } from \"react\";\r\n\r\nconst UserPanel = ({users, startConversation}) => {\r\n  const [filteredName, setFilter] = useState(\"\");\r\n\r\n  const handleFilter = (event) => {\r\n    setFilter(event.target.value);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <FilterInput name={filteredName} handler={handleFilter} />\r\n      <UserList users={users} filterUser={filteredName} startConversation={startConversation} />\r\n    </div>\r\n  );\r\n} \r\n\r\nexport default UserPanel;","import axios from \"axios\"; \r\n\r\nconst baseUrl = \"/users\";\r\n\r\nconst getUsers = async username => {\r\n  const response = await axios.post(baseUrl, username);\r\n  \r\n  return response.data;\r\n}\r\n\r\nconst usersService = {\r\n  getUsers\r\n};\r\nexport default usersService;","import axios from \"axios\"; \r\n\r\nconst baseUrl = \"/messages\";\r\n\r\nlet token = null\r\n\r\nconst createConversation = async usernames => {\r\n  const response = await axios.post(baseUrl, usernames);\r\n  \r\n  return response.data;\r\n}\r\n\r\nconst setToken = newToken => {\r\n  token = `bearer ${newToken}`;\r\n}\r\n\r\nconst messengerService = {\r\n  createConversation,\r\n  setToken\r\n};\r\nexport default messengerService;\r\n","import { Avatar, Box, Button, Typography } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\r\n\r\nconst CurrentUserBox = ({currentUser}) => {\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\"  flexDirection=\"row\" style={{width: \"100%\", margin: 20,}}>\r\n      <Avatar style={{ marginLeft: 5 , marginRight: 10}}/>\r\n      <Typography >\r\n        {currentUser ? currentUser.username: \"None\"}\r\n      </Typography>\r\n      <Button size=\"small\" startIcon={<MoreHorizIcon/>}/>\r\n    </Box>\r\n  )\r\n};\r\n\r\nexport default CurrentUserBox;","import React, {useState, useEffect } from \"react\";\r\nimport { MuiThemeProvider } from \"@material-ui/core\";\r\nimport { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\r\n\r\nimport { theme } from \"./themes/theme\";\r\nimport Register from \"./pages/Register\";\r\nimport Login from \"./pages/Login\";\r\nimport Messenger from \"./pages/Messenger\";\r\nimport messengerService from \"./services/messenger\";\r\n\r\nimport \"./App.css\";\r\n\r\nconst App = () => {\r\n  const [user, setUser] = useState(null);\r\n\r\n  useEffect(()=> {\r\n    const loggedUserJSON = window.localStorage.getItem(\"userAuthenticated\");\r\n    if (loggedUserJSON) {\r\n      const userLoggedIn = JSON.parse(loggedUserJSON);\r\n      setUser(userLoggedIn);\r\n      messengerService.setToken(userLoggedIn.token)\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <MuiThemeProvider theme={theme}>\r\n      <BrowserRouter>\r\n        <Switch>\r\n          <Route path=\"/register\" component={Register} />\r\n          <Route path=\"/login\" component={Login} />\r\n          <Route path=\"/messenger\">\r\n            <Messenger/>\r\n          </Route>\r\n          <Route path=\"/\">\r\n            {user ? <Redirect to=\"/messenger\"/> : <Register />}\r\n          </Route>\r\n        </Switch>\r\n      </BrowserRouter>\r\n    </MuiThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}