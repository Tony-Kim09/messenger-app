(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{150:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){"use strict";n.r(t);var a,r=n(2),c=n(0),s=n(10),i=n.n(s),o=(n(150),n(11)),l=n(250),u=n(37),j=n(13),d=n(134),b=Object(d.a)({typography:{fontFamily:"Open Sans",fontSize:18},palette:{primary:{main:"#1976d2"},secondary:{main:"#fff",contrastText:"#1976d2"}}}),h=n(240),m=n(254),x=n(238),g=n.p+"static/media/bg-img.0c5628a9.png",O=Object(x.a)((function(e){return{root:{height:"100vh"},paper:{marginTop:"15%",marginLeft:"15%",marginRight:"15%",display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},image:{background:"linear-gradient(180deg, rgba(58, 141, 255, 0.85), rgba(134, 185, 255, 0.85)), url(".concat(g,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},mainButton:{margin:e.spacing(7,0,2),padding:e.spacing(1,3)},secondaryButton:{margin:e.spacing(1,0,0),padding:e.spacing(1,2)},loginRegisterRedirect:{marginBottom:e.spacing(5),display:"flex",flexDirection:"horizontal",alignItems:"end",width:"100%"},loginRedirectText:{marginTop:e.spacing(2),color:"lightgrey"},backgroundImageText:{padding:e.spacing(0,"15%")}}})),p=n(80),f=n.n(p),v=n(135),y=n(251),w=n(256),S=n(82),C=n(242),k=function(){var e=O(),t=Object(j.g)();return Object(r.jsx)("div",{className:e.loginRegisterRedirect,children:Object(r.jsxs)(h.a,{container:!0,justify:"flex-end",spacing:2,children:[Object(r.jsx)(h.a,{item:!0,children:Object(r.jsx)(S.a,{className:e.loginRedirectText,variant:"subtitle1",children:"Already have an account?"})}),Object(r.jsx)(h.a,{item:!0,children:Object(r.jsx)(C.a,{type:"button",variant:"contained",color:"secondary",size:"large",className:e.secondaryButton,onClick:function(){t.push("/login")},children:Object(r.jsx)("b",{children:"Login"})})})]})})},N=function(e){var t=e.createUser,n=Object(c.useState)(""),a=Object(o.a)(n,2),s=a[0],i=a[1],l=Object(c.useState)(""),u=Object(o.a)(l,2),j=u[0],d=u[1],b=Object(c.useState)(""),x=Object(o.a)(b,2),g=x[0],p=x[1],f=Object(c.useState)(""),N=Object(o.a)(f,2),I=N[0],T=N[1],B=Object(c.useState)(!1),U=Object(o.a)(B,2),z=U[0],R=U[1],A=Object(c.useState)({}),D=Object(o.a)(A,2),W=D[0],E=D[1],L=O(),P=function(e,t){"clickaway"!==t&&R(!1)};return Object(r.jsxs)("div",{className:L.paper,children:[Object(r.jsx)(k,{}),Object(r.jsx)(h.a,{container:!0,alignContent:"flex-start",children:Object(r.jsx)(S.a,{component:"h1",variant:"h4",children:Object(r.jsx)("b",{children:"Create an account"})})}),Object(r.jsxs)("form",{className:L.form,onSubmit:function(e){e.preventDefault(),!function(){var e={};return e.username=s.length>2?"":"Minimum of 3 characters",e.password=g.length>5?"":"Minimum of 6 characters",e.email=/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9]+\.[A-Za-z]+$/.test(I)?"":"Email Format is xyz@xxx.xxx",E(Object(v.a)({},e)),Object.values(e).every((function(e){return""===e}))}()?R(!0):(t({username:s,name:j,email:I,password:g}),R(!1),i(""),d(""),T(""),p(""))},children:[Object(r.jsxs)(h.a,{container:!0,spacing:2,children:[Object(r.jsx)(h.a,{item:!0,xs:12,children:Object(r.jsx)(y.a,{value:s,label:"Username",required:!0,fullWidth:!0,autoFocus:!0,onChange:function(e){i(e.target.value)},error:Boolean(W.username),helperText:W.username?W.username:""})}),Object(r.jsx)(h.a,{item:!0,xs:12,children:Object(r.jsx)(y.a,{value:j,label:"Name",required:!0,fullWidth:!0,onChange:function(e){d(e.target.value)}})}),Object(r.jsx)(h.a,{item:!0,xs:12,children:Object(r.jsx)(y.a,{value:I,label:"E-mail Address",required:!0,fullWidth:!0,onChange:function(e){T(e.target.value)},error:Boolean(W.email),helperText:W.email?W.email:""})}),Object(r.jsx)(h.a,{item:!0,xs:12,children:Object(r.jsx)(y.a,{value:g,type:"password",label:"Password",required:!0,fullWidth:!0,onChange:function(e){p(e.target.value)},error:Boolean(W.password),helperText:W.password?W.password:""})})]}),Object(r.jsx)(h.a,{container:!0,justify:"center",children:Object(r.jsx)(h.a,{item:!0,children:Object(r.jsx)(C.a,{type:"submit",variant:"contained",color:"primary",size:"large",className:L.mainButton,disableElevation:!0,children:Object(r.jsx)("b",{children:"Create"})})})})]}),Object(r.jsx)("div",{children:Object(r.jsx)(w.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:z,autoHideDuration:3e3,onClose:P,children:Object(r.jsx)(m.a,{onClose:P,severity:"error",children:"Please make sure all inputs are valid."})})})]})},I=n(19),T=n.n(I),B=n(30),U=n(42),z=n.n(U),R={create:function(){var e=Object(B.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.post("/register",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},A=n(252),D=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),i=Object(o.a)(s,2),l=i[0],u=i[1],d=Object(j.g)(),b=O();return Object(r.jsxs)(h.a,{container:!0,className:b.root,children:[Object(r.jsx)(h.a,{component:A.a,xs:!1,sm:5,className:b.image,display:{xs:"none",sm:"block"},children:Object(r.jsxs)(A.a,{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",children:[Object(r.jsx)(f.a,{className:b.backgroundImageText,color:"secondary",style:{fontSize:"90"}}),Object(r.jsx)("br",{}),Object(r.jsx)(S.a,{className:b.backgroundImageText,variant:"h4",color:"secondary",align:"center",children:Object(r.jsx)(A.a,{letterSpacing:2,lineHeight:1.5,children:"Converse with anyone at any moment"})})]})}),Object(r.jsxs)(h.a,{item:!0,xs:12,sm:7,children:[n&&Object(r.jsx)(m.a,{severity:"success",children:n}),l&&Object(r.jsx)(m.a,{severity:"error",children:l}),Object(r.jsx)(N,{createUser:function(e){R.create(e).then((function(e){a("Registration Successful! Welcome ".concat(e.name)),window.localStorage.setItem("userAuthenticated",JSON.stringify(e)),d.push("/messenger")})).catch((function(e){u("Something went wrong on our side. Please try again later")}))}})]})]})},W=function(){var e=O(),t=Object(j.g)();return Object(r.jsx)("div",{className:e.loginRegisterRedirect,children:Object(r.jsxs)(h.a,{container:!0,justify:"flex-end",spacing:2,children:[Object(r.jsx)(h.a,{item:!0,children:Object(r.jsx)(S.a,{className:e.loginRedirectText,variant:"subtitle1",children:"Don't have an account?"})}),Object(r.jsx)(h.a,{item:!0,children:Object(r.jsx)(C.a,{type:"button",variant:"contained",color:"secondary",size:"large",className:e.secondaryButton,onClick:function(){t.push("/register")},children:Object(r.jsx)("b",{children:"Create"})})})]})})},E=function(e){var t=e.loginUser,n=Object(c.useState)(""),a=Object(o.a)(n,2),s=a[0],i=a[1],l=Object(c.useState)(""),u=Object(o.a)(l,2),j=u[0],d=u[1],b=O();return Object(r.jsxs)("div",{className:b.paper,children:[Object(r.jsx)(W,{}),Object(r.jsx)(h.a,{container:!0,alignContent:"flex-start",children:Object(r.jsx)(S.a,{component:"h1",variant:"h4",fontWeight:"fontWeightBold",children:Object(r.jsx)("b",{children:"Welcome Back!"})})}),Object(r.jsxs)("form",{className:b.form,onSubmit:function(e){e.preventDefault(),t({email:s,password:j}),i(""),d("")},children:[Object(r.jsxs)(h.a,{container:!0,spacing:2,children:[Object(r.jsx)(h.a,{item:!0,xs:12,children:Object(r.jsx)(y.a,{value:s,label:"E-mail",required:!0,fullWidth:!0,autoFocus:!0,onChange:function(e){i(e.target.value)}})}),Object(r.jsx)(h.a,{item:!0,xs:12,children:Object(r.jsx)(y.a,{value:j,type:"password",label:"Password",required:!0,fullWidth:!0,onChange:function(e){d(e.target.value)}})})]}),Object(r.jsx)(h.a,{container:!0,justify:"center",children:Object(r.jsx)(h.a,{item:!0,children:Object(r.jsx)(C.a,{type:"submit",variant:"contained",color:"primary",size:"large",className:b.mainButton,disableElevation:!0,children:Object(r.jsx)("b",{children:"Login"})})})})]})]})},L={login:function(){var e=Object(B.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.post("/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),i=Object(o.a)(s,2),l=i[0],u=i[1],d=Object(j.g)(),b=O();return Object(r.jsxs)(h.a,{container:!0,className:b.root,children:[Object(r.jsx)(h.a,{component:A.a,xs:!1,sm:5,className:b.image,display:{xs:"none",sm:"block"},children:Object(r.jsxs)(A.a,{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",children:[Object(r.jsx)(f.a,{className:b.backgroundImageText,color:"secondary",style:{fontSize:"90"}}),Object(r.jsx)("br",{}),Object(r.jsx)(S.a,{className:b.backgroundImageText,variant:"h4",color:"secondary",align:"center",children:Object(r.jsx)(A.a,{letterSpacing:2,lineHeight:1.5,children:"Converse with anyone at any moment"})})]})}),Object(r.jsxs)(h.a,{item:!0,xs:12,sm:7,children:[n&&Object(r.jsx)(m.a,{severity:"success",children:n}),l&&Object(r.jsx)(m.a,{severity:"error",children:l}),Object(r.jsx)(E,{loginUser:function(e){L.login(e).then((function(e){a("Login Successful! Redirecting to messager app"),window.localStorage.setItem("userAuthenticated",JSON.stringify(e)),d.push("/messenger")})).catch((function(e){u("Invalid Username or Password"),setTimeout((function(){u(null)}),5e3)}))}})]})]})},q=n(81),J=n(131),F=n.n(J),H=n(16),M=Object(x.a)((function(e){return{root:{display:"flex"},messageBox:{height:"85vh"},chatInput:{display:"flex",flexDirection:"horizontal",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},drawer:{width:400,flexShrink:0},drawerPaper:{width:400,overflowX:"hidden"},chatHeaderText:{margin:e.spacing(0,2,2,2)},searchBarContainer:{width:400,margin:e.spacing(0,2,2,2),backgroundColor:Object(H.c)(e.palette.primary.light,.25)},contentRight:{flexGrow:1,padding:e.spacing(3)},currentUserAvatarColor:{background:"linear-gradient(180deg, rgba(58, 141, 255, 0.85), rgba(134, 185, 255, 0.85))"}}})),Z=n(206),G=function(e){var t=e.messages,n=e.text,a=e.setText,c=e.sendMessage,s=M();return Object(r.jsxs)(Z.a,{children:[Object(r.jsx)("div",{className:s.messageBox,children:t.map((function(e,t){return Object(r.jsxs)("div",{children:[Object(r.jsxs)("b",{children:[e.sender,":"]})," ",e.text]},t)}))}),Object(r.jsx)("div",{children:Object(r.jsxs)("form",{autoComplete:"off",className:s.chatInput,onSubmit:c,children:[Object(r.jsx)(y.a,{value:n,variant:"outlined",fullWidth:!0,autoFocus:!0,onChange:function(e){e.preventDefault(),a(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?c(e):null}}),Object(r.jsx)(C.a,{disabled:""===n.trim(),type:"button",onClick:c,variant:"contained",color:"primary",size:"large",disableElevation:!0,children:"Send"})]})})]})},K=function(e){var t=e.setUser,n=Object(j.g)();return Object(r.jsx)(C.a,{type:"button",variant:"contained",color:"primary",onClick:function(e){window.localStorage.removeItem("userAuthenticated"),n.push("/register"),t(null)},children:"LogOut"})},X=n(246),Y=n(247),$=n(258),_=function(e){var t=e.username,n=function(e,t,n){for(var a=0,r=0;r<e.length;r++)a=e.charCodeAt(r)+((a<<5)-a);return"hsl(".concat(a%360,", ").concat(t,"%, ").concat(n,"%)")}(t,50,80),a=Object(x.a)((function(){return{userListItem:{width:"100%"},avatarColor:{background:"".concat(n),width:"50px",height:"50px"}}}))();return Object(r.jsx)(X.a,{className:a.userListItem,style:{height:"100px",paddingTop:"8px",borderBottom:"solid",borderWidth:"2px",borderBottomColor:"rgba(230, 230, 230, 0.5)",borderRadius:"2px",marginBottom:"-15px"},elevation:0,children:Object(r.jsx)(Y.a,{avatar:Object(r.jsx)($.a,{className:a.avatarColor,"aria-label":"users",children:t.substring(0,1).toUpperCase()}),title:Object(r.jsx)("b",{children:t})})})},Q=n(248),V=n(244),ee=function(e){var t=e.users,n=e.filterUser,a=e.startConversation;return Object(r.jsx)(V.a,{children:t?t.reduce((function(e,t){return t.username.toLowerCase().includes(n.toLowerCase())?[].concat(Object(q.a)(e),[Object(r.jsx)(Q.a,{onClick:function(){return a(t)},children:Object(r.jsx)(_,{username:t.username})},t.id)]):e}),[]):null})},te=n(245),ne=n(257),ae=n(132),re=n.n(ae),ce=function(e){var t=e.name,n=e.handler;return Object(r.jsxs)(Z.a,{style:{background:"rgba(163, 198, 255, 0.3)",height:65,width:350,display:"flex",alignItems:"center",marginLeft:"16px"},sx:{height:300},elevation:0,children:[Object(r.jsx)(te.a,{sx:{p:"10px"},"aria-label":"search",disabled:"true",children:Object(r.jsx)(re.a,{})}),Object(r.jsx)(ne.a,{placeholder:"Search",inputProps:{"aria-label":"Search"},value:t,onChange:n})]})},se=function(e){var t=e.users,n=e.startConversation,a=Object(c.useState)(""),s=Object(o.a)(a,2),i=s[0],l=s[1],u=M();return Object(r.jsxs)("div",{children:[Object(r.jsx)(S.a,{className:u.chatHeaderText,variant:"h4",style:{marginBottom:10},children:"Chats"}),Object(r.jsx)(ce,{name:i,handler:function(e){l(e.target.value)}}),Object(r.jsx)(ee,{users:t,filterUser:i,startConversation:n})]})},ie={getUsers:function(){var e=Object(B.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.post("/users",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},oe={createConversation:function(){var e=Object(B.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.post("/messages",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){"bearer ".concat(e)}},le=n(133),ue=n.n(le),je=function(e){var t=e.currentUser,n=M();return Object(r.jsxs)(A.a,{display:"flex",alignItems:"center",flexDirection:"row",style:{width:"100%",margin:20},children:[Object(r.jsx)($.a,{className:n.currentUserAvatarColor,style:{width:"60px",height:"60px",marginLeft:5,marginRight:10}}),Object(r.jsx)(S.a,{children:Object(r.jsx)("b",{children:t?t.username:"None"})}),Object(r.jsx)(C.a,{size:"small",startIcon:Object(r.jsx)(ue.a,{})})]})},de=n(249),be=n(255),he=function(){var e=Object(j.g)(),t=M(),n=Object(c.useState)(""),s=Object(o.a)(n,2),i=s[0],l=s[1],u=Object(c.useState)(!1),d=Object(o.a)(u,2),b=d[0],h=d[1],m=Object(c.useState)(null),x=Object(o.a)(m,2),g=x[0],O=x[1],p=Object(c.useState)([]),f=Object(o.a)(p,2),v=f[0],y=f[1],w=Object(c.useState)(""),S=Object(o.a)(w,2),C=S[0],k=S[1],N=Object(c.useState)([]),I=Object(o.a)(N,2),U=I[0],z=I[1];Object(c.useEffect)((function(){a=F()();var t=window.localStorage.getItem("userAuthenticated");if(t){var n=JSON.parse(t);O(n),ie.getUsers({username:n.username}).then((function(e){return y(e)}))}else alert("You must be logged in"),e.push("/login")}),[e]);var R=function(){var e=Object(B.a)(T.a.mark((function e(t){var n,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z([]),n={usernames:[g.username,t.username]},e.next=4,oe.createConversation(n);case 4:r=e.sent,h(!0),l(r.id),r.messages&&z(r.messages),c={user:g.username,target:t.username,id:r.id},a.emit("join",c);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){a.on("message",(function(e){z((function(t){return[].concat(Object(q.a)(t),[e])}))}))}),[]);return Object(r.jsxs)("div",{className:t.root,children:[Object(r.jsx)(de.a,{}),Object(r.jsx)("div",{className:t.drawer,children:Object(r.jsxs)(be.a,{variant:"permanent",anchor:"left",classes:{paper:t.drawerPaper},children:[Object(r.jsx)(je,{currentUser:g}),Object(r.jsx)(se,{users:v,currentUser:g,startConversation:R})]})}),Object(r.jsxs)("div",{bordertop:1,className:t.contentRight,children:[Object(r.jsx)(K,{setUser:O}),b?Object(r.jsx)(G,{messages:U,text:C,setText:k,sendMessage:function(e){e.preventDefault();var t=C.trim(),n={sender:g.username,text:t};n&&a.emit("sendMessage",{currentConversationID:i,msg:n},(function(){return k("")})),k("")}}):null]})]})},me=(n(203),function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){var e=window.localStorage.getItem("userAuthenticated");if(e){var t=JSON.parse(e);a(t),oe.setToken(t.token)}}),[]),Object(r.jsx)(l.a,{theme:b,children:Object(r.jsx)(u.a,{children:Object(r.jsxs)(j.d,{children:[Object(r.jsx)(j.b,{path:"/register",component:D}),Object(r.jsx)(j.b,{path:"/login",component:P}),Object(r.jsx)(j.b,{path:"/messenger",children:Object(r.jsx)(he,{})}),Object(r.jsx)(j.b,{path:"/",children:n?Object(r.jsx)(j.a,{to:"/messenger"}):Object(r.jsx)(D,{})})]})})})});i.a.render(Object(r.jsx)(me,{}),document.getElementById("root"))}},[[204,1,2]]]);
//# sourceMappingURL=main.6e91bb57.chunk.js.map