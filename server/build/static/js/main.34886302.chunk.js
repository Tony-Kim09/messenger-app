(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{413:function(e,t,a){},636:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a(21),s=a.n(c),i=(a(413),a(716)),o=a(374),l=Object(o.a)({typography:{fontFamily:"Open Sans"},palette:{primary:{main:"#3A8DFF"},secondary:{main:"#fff",contrastText:"#3A8DFF"}}}),u=a(10),d=a(89),j=a(27),b=a(698),g=a(722),h=a(9),m=a(696),p=Object(m.a)((function(e){return{container:{height:"100vh",width:"100vw"},left:Object(h.a)({},e.breakpoints.down("xs"),{display:"none"})}})),x=a(146),O=a(719),f=a(728),v=a(196),C=a(700),w=Object(m.a)((function(e){var t;return{container:(t={display:"flex",height:"100%",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:e.spacing(0,5)},Object(h.a)(t,e.breakpoints.down("xs"),{margin:e.spacing(0,4)}),Object(h.a)(t,e.breakpoints.up("lg"),{margin:e.spacing(0,15)}),t),headerText:{fontSize:"1.75em",textAlign:"start",width:"100%",marginBottom:e.spacing(3)},formContainer:{margin:e.spacing(0,5)},inputField:{marginBottom:e.spacing(2,0)},mainButton:{padding:e.spacing(1.5,5.5),margin:e.spacing(10,0,5)},redirectContainer:{marginBottom:e.spacing(10),display:"flex",flexDirection:"horizontal",alignItems:"end",width:"100%"},redirectButton:{padding:e.spacing(1.5,5.5)},redirectText:{color:"lightgrey",marginTop:e.spacing(1)}}})),y=a(2),S=function(){var e=w(),t=Object(j.g)();return Object(y.jsx)("div",{className:e.redirectContainer,children:Object(y.jsxs)(b.a,{container:!0,justifyContent:"flex-end",spacing:2,children:[Object(y.jsx)(b.a,{item:!0,children:Object(y.jsx)(v.a,{className:e.redirectText,variant:"subtitle1",children:"Already have an account?"})}),Object(y.jsx)(b.a,{item:!0,children:Object(y.jsx)(C.a,{id:"change-to-login-button",type:"button",variant:"contained",color:"secondary",size:"large",className:e.redirectButton,onClick:function(){t.push("/login")},children:Object(y.jsx)("b",{children:"Login"})})})]})})},N=function(e){var t=e.createUser,a=Object(r.useState)(""),n=Object(u.a)(a,2),c=n[0],s=n[1],i=Object(r.useState)(""),o=Object(u.a)(i,2),l=o[0],d=o[1],j=Object(r.useState)(""),h=Object(u.a)(j,2),m=h[0],p=h[1],N=Object(r.useState)(""),k=Object(u.a)(N,2),U=k[0],I=k[1],z=Object(r.useState)(!1),T=Object(u.a)(z,2),A=T[0],F=T[1],B=Object(r.useState)({}),D=Object(u.a)(B,2),M=D[0],R=D[1],P=w(),E=function(e,t){F(!1)};return Object(y.jsxs)("div",{className:P.container,children:[Object(y.jsx)(S,{}),Object(y.jsxs)("div",{className:P.formContainer,children:[Object(y.jsx)(v.a,{variant:"h4",className:P.headerText,children:Object(y.jsx)("b",{children:"Create an account"})}),Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),!function(){var e={};return e.username=c.length>2?"":"Minimum of 3 characters",e.password=m.length>5?"":"Minimum of 6 characters",e.email=/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9]+\.[A-Za-z]+$/.test(U)?"":"Email Format is xyz@xxx.xxx",R(Object(x.a)({},e)),Object.values(e).every((function(e){return""===e}))}()?F(!0):(t({username:c,name:l,email:U,password:m}),F(!1),s(""),d(""),I(""),p(""))},children:[Object(y.jsxs)(b.a,{container:!0,spacing:2,children:[Object(y.jsx)(b.a,{item:!0,xs:12,className:P.inputField,children:Object(y.jsx)(O.a,{value:c,label:"Username",id:"username",required:!0,fullWidth:!0,autoFocus:!0,autoComplete:"off",onChange:function(e){s(e.target.value)},error:Boolean(M.username),helperText:M.username?M.username:""})}),Object(y.jsx)(b.a,{item:!0,xs:12,children:Object(y.jsx)(O.a,{value:l,label:"Name",id:"name",required:!0,fullWidth:!0,autoComplete:"off",onChange:function(e){d(e.target.value)}})}),Object(y.jsx)(b.a,{item:!0,xs:12,children:Object(y.jsx)(O.a,{value:U,label:"E-mail Address",id:"email",required:!0,fullWidth:!0,autoComplete:"off",onChange:function(e){I(e.target.value)},error:Boolean(M.email),helperText:M.email?M.email:""})}),Object(y.jsx)(b.a,{item:!0,xs:12,children:Object(y.jsx)(O.a,{value:m,type:"password",label:"Password",id:"password",required:!0,fullWidth:!0,autoComplete:"off",onChange:function(e){p(e.target.value)},error:Boolean(M.password),helperText:M.password?M.password:""})})]}),Object(y.jsx)(b.a,{container:!0,justifyContent:"center",children:Object(y.jsx)(b.a,{item:!0,children:Object(y.jsx)(C.a,{id:"create-button",type:"submit",variant:"contained",color:"primary",size:"large",className:P.mainButton,disableElevation:!0,children:Object(y.jsx)("b",{children:"Create"})})})})]})]}),Object(y.jsx)("div",{children:Object(y.jsx)(f.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:A,autoHideDuration:3e3,onClose:E,children:Object(y.jsx)(g.a,{onClose:E,severity:"error",children:"Please make sure all inputs are valid."})})})]})},k=a(24),U=a.n(k),I=a(42),z=a(70),T=a.n(z),A=function(){var e=Object(I.a)(U.a.mark((function e(t){var a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post("/register",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F={create:A},B=a(705),D=a(341),M=a.n(D),R=a(720),P=a.p+"static/media/bg-img.0c5628a9.png",E=Object(m.a)((function(e){return{container:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",background:"linear-gradient(180deg, rgba(58, 141, 255, 0.85), rgba(134, 185, 255, 0.85)), url(".concat(P,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},icon:{fontSize:"75px"}}})),L=function(){var e=E();return Object(y.jsxs)(B.a,{className:e.container,children:[Object(y.jsx)(M.a,{color:"secondary",className:e.icon}),Object(y.jsx)(v.a,{variant:"h4",color:"secondary",align:"center",children:Object(y.jsx)(R.a,{letterSpacing:2,lineHeight:1.5,children:"Converse with anyone at any moment"})})]})},W=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(""),s=Object(u.a)(c,2),i=s[0],o=s[1],l=Object(j.g)(),d=p();return Object(y.jsxs)(b.a,{container:!0,className:d.container,children:[Object(y.jsx)(b.a,{item:!0,sm:5,className:d.left,children:Object(y.jsx)(L,{})}),Object(y.jsxs)(b.a,{item:!0,xs:12,sm:7,className:d.right,children:[a&&Object(y.jsx)(g.a,{severity:"success",children:a}),i&&Object(y.jsx)(g.a,{severity:"error",children:i}),Object(y.jsx)(N,{createUser:function(e){F.create(e).then((function(e){n("Registration Successful! Welcome ".concat(e.name)),window.localStorage.setItem("userAuthenticated",JSON.stringify(e)),l.push("/messenger")})).catch((function(e){o("Something went wrong on our side. Please try again later")}))}})]})]})},H=Object(m.a)((function(e){var t,a;return{container:(t={display:"flex",height:"100%",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:e.spacing(0,5)},Object(h.a)(t,e.breakpoints.down("xs"),{margin:e.spacing(0,4)}),Object(h.a)(t,e.breakpoints.up("lg"),{margin:e.spacing(0,8)}),t),headerText:{fontSize:"1.75em",textAlign:"start",width:"100%",marginBottom:e.spacing(4)},formContainer:{width:"70%"},inputField:{marginBottom:e.spacing(2,0)},mainButton:{padding:e.spacing(1.5,5.5),margin:e.spacing(8,0,5)},redirectContainer:(a={marginBottom:e.spacing(10),marginRight:e.spacing(15),display:"flex",flexDirection:"horizontal",alignItems:"end",width:"100%"},Object(h.a)(a,e.breakpoints.down("xs"),{marginRight:e.spacing(0)}),Object(h.a)(a,e.breakpoints.down("sm"),{marginRight:e.spacing(5)}),Object(h.a)(a,e.breakpoints.down("md"),{marginRight:e.spacing(6)}),a),redirectButton:{padding:e.spacing(1.5,5.5)},redirectText:{color:"lightgrey",marginTop:e.spacing(1)}}})),J=function(){var e=H(),t=Object(j.g)();return Object(y.jsx)("div",{className:e.redirectContainer,children:Object(y.jsxs)(b.a,{container:!0,justifyContent:"flex-end",spacing:2,children:[Object(y.jsx)(b.a,{item:!0,children:Object(y.jsx)(v.a,{className:e.redirectText,variant:"subtitle1",children:"Don't have an account?"})}),Object(y.jsx)(b.a,{item:!0,children:Object(y.jsx)(C.a,{type:"button",variant:"contained",color:"secondary",size:"large",className:e.redirectButton,onClick:function(){t.push("/register")},children:Object(y.jsx)("b",{children:"Create"})})})]})})},q=function(e){var t=e.loginUser,a=Object(r.useState)(""),n=Object(u.a)(a,2),c=n[0],s=n[1],i=Object(r.useState)(""),o=Object(u.a)(i,2),l=o[0],d=o[1],j=H();return Object(y.jsxs)("div",{className:j.container,children:[Object(y.jsx)(J,{}),Object(y.jsxs)("div",{className:j.formContainer,children:[Object(y.jsx)(v.a,{variant:"h4",className:j.headerText,children:Object(y.jsx)("b",{children:"Welcome Back!"})}),Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({email:c,password:l}),s(""),d("")},children:[Object(y.jsxs)(b.a,{container:!0,spacing:2,children:[Object(y.jsx)(b.a,{item:!0,xs:12,className:j.inputField,children:Object(y.jsx)(O.a,{value:c,id:"email",label:"E-mail",fullWidth:!0,autoFocus:!0,autoComplete:"off",onChange:function(e){s(e.target.value)}})}),Object(y.jsx)(b.a,{item:!0,xs:12,children:Object(y.jsx)(O.a,{value:l,id:"password",type:"password",label:"Password",fullWidth:!0,autoComplete:"off",onChange:function(e){d(e.target.value)}})})]}),Object(y.jsx)(b.a,{container:!0,justifyContent:"center",children:Object(y.jsx)(b.a,{item:!0,children:Object(y.jsx)(C.a,{type:"submit",id:"login-button",variant:"contained",color:"primary",size:"large",className:j.mainButton,disableElevation:!0,children:Object(y.jsx)("b",{children:"Login"})})})})]})]})]})},Z=function(){var e=Object(I.a)(U.a.mark((function e(t){var a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post("/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G={login:Z},Y=Object(m.a)((function(e){return{container:{height:"100vh",width:"100vw"},left:Object(h.a)({},e.breakpoints.down("xs"),{display:"none"})}})),K=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(""),s=Object(u.a)(c,2),i=s[0],o=s[1],l=Object(j.g)(),d=Y();return Object(y.jsxs)(b.a,{container:!0,className:d.container,children:[Object(y.jsx)(b.a,{item:!0,sm:5,className:d.left,children:Object(y.jsx)(L,{})}),Object(y.jsxs)(b.a,{item:!0,xs:12,sm:7,children:[a&&Object(y.jsx)(g.a,{severity:"success",children:a}),i&&Object(y.jsx)(g.a,{severity:"error",children:i}),Object(y.jsx)(q,{loginUser:function(e){G.login(e).then((function(e){n("Login Successful! Redirecting to messager app"),window.localStorage.setItem("userAuthenticated",JSON.stringify(e)),l.push("/messenger")})).catch((function(e){o("Invalid Username or Password"),setTimeout((function(){o(null)}),5e3)}))}})]})]})},$=a(33),_=a(343),Q=a.n(_)()(),V=function(e){n="bearer ".concat(e)},X="/users",ee=function(){var e=Object(I.a)(U.a.mark((function e(t){var a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post(X,t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(I.a)(U.a.mark((function e(t,a){var r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post("".concat(X,"/avatar"),t,{headers:{Authorization:"".concat(n)},onUploadProgress:function(e){a(e.loaded/e.total*100)}});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ae={getUsers:ee,changeAvatar:te},ne="/messages",re=function(){var e=Object(I.a)(U.a.mark((function e(t){var a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post(ne,t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(I.a)(U.a.mark((function e(t,a){var r,c;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:"".concat(n)}},e.next=3,T.a.post("".concat(ne,"/").concat(t),{message:a},r);case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),se={createConversation:re,saveMessage:ce},ie=a(706),oe=a(707),le=a(729),ue=function(e,t,a){for(var n=0,r=0;r<e.length;r++)n=e.charCodeAt(r)+((n<<5)-n);return"hsl(".concat(n%360,", ").concat(t,"%, ").concat(a,"%)")},de=function(e){var t=e.username,a=e.avatarID,n=ue(t,50,80),r=Object(m.a)((function(e){return{userCardContainer:{height:"100px",width:"100%",display:"flex",alignItems:"center",cursor:"pointer",boxShadow:"0.125em 0.125em 0.25em rgba(0, 0, 0, 0.05)",paddingLeft:e.spacing(1)},avatarColor:{background:"".concat(n),width:"60px",height:"60px"}}}))();return Object(y.jsx)(ie.a,{className:r.userCardContainer,elevation:0,children:Object(y.jsx)(oe.a,{avatar:Object(y.jsx)(le.a,{className:r.avatarColor,src:a?"/users/avatar/".concat(a):"","aria-label":"users",children:t.substring(0,1).toUpperCase()}),title:Object(y.jsx)("b",{children:t})})})},je=a(708),be=a(702),ge=function(e){var t=e.users,a=e.filterUser,n=e.startConversation;return Object(y.jsx)(be.a,{children:t?t.reduce((function(e,t){return t.username.toLowerCase().includes(a.toLowerCase())?[].concat(Object($.a)(e),[Object(y.jsx)(je.a,{disableGutters:!0,style:{padding:1},onClick:function(){return n(t)},children:Object(y.jsx)(de,{username:t.username,avatarID:t.avatar})},t.id)]):e}),[]):null})},he=a(379),me=a(704),pe=a(727),xe=a(344),Oe=a.n(xe),fe=function(e){var t=e.name,a=e.handler,n=Object(m.a)((function(e){return{searchContainer:{background:"#E9EEF9",height:65,display:"flex",alignItems:"center",margin:e.spacing(0,2)},searchIconContainer:{paddingLeft:10}}}))();return Object(y.jsxs)(he.a,{className:n.searchContainer,elevation:0,children:[Object(y.jsx)(me.a,{"aria-label":"search",disabled:!0,children:Object(y.jsx)(Oe.a,{})}),Object(y.jsx)(pe.a,{placeholder:"Search",id:"search-bar",inputProps:{"aria-label":"Search"},value:t,onChange:a})]})},ve=Object(m.a)((function(e){return{userPanelContainer:{height:"100vh",overflow:"auto",boxShadow:"0.125em 0.125em 0.25em rgba(0, 0, 0, 0.025)"},chatHeaderText:{margin:e.spacing(0,2,2,2)}}})),Ce=Object(m.a)((function(e){var t;return{currentUserContainer:(t={width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"left"},Object(h.a)(t,"justifyContent","space-between"),Object(h.a)(t,"padding",e.spacing(3,2)),t),avatarNameContainer:{display:"flex",flexDirection:"row",alignItems:"center"},currentUserAvatarColor:{background:"linear-gradient(180deg, rgba(58, 141, 255, 0.85), rgba(134, 185, 255, 0.85))",width:"60px",height:"60px",marginRight:e.spacing(2)},currentUserName:{fontSize:24}}})),we=a(725),ye=a(355),Se=a.n(ye),Ne=a(717),ke=a(732),Ue=a(718),Ie=a(726),ze=a(713),Te=a(358),Ae=a.n(Te),Fe=a(714),Be=a(375),De=function(e){var t=e.setCurrentUser,a=e.showDropzone,n=e.setShowDropzone,c=Object(r.useState)(null),s=Object(u.a)(c,2),i=(s[0],s[1]),o=Object(r.useState)(null),l=Object(u.a)(o,2),d=(l[0],l[1]),j=function(){var e=Object(I.a)(U.a.mark((function e(a){var r,c,s,i,o,l,j;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(u.a)(a,1),c=r[0],(s=new FormData).append("avatar",c),e.next=5,ae.changeAvatar(s,d);case 5:i=e.sent,o=window.localStorage.getItem("userAuthenticated"),l=JSON.parse(o),j=Object(x.a)(Object(x.a)({},l),{},{avatar:i.avatar}),window.localStorage.setItem("userAuthenticated",JSON.stringify(j)),t(i),n(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(Be.a,{open:a,onChange:function(e){var t=Object(u.a)(e,1)[0];return t&&i(t)},onClose:function(){return n(!1)},onDelete:function(){return i(null)},acceptedFiles:["image/jpeg","image/png"],maxFileSize:2e7,filesLimit:1,showFileNamesInPreview:!1,showFileNames:!1,dropzoneText:"Drop image here",getFileAddedMessage:function(){return"Image successfully added!"},getFileRemovedMessage:function(){return"Image successfully deleted!"},onAlert:function(e){return console.log({alert:e})},getFileLimitExceedMessage:function(){return"File is too big"},getDropRejectMessage:function(e){return e.size>5e6?"File is too big":"Invalid file type"},onSave:j})})},Me=function(e){var t=e.setCurrentUser,a=Object(r.useState)(null),n=Object(u.a)(a,2),c=n[0],s=n[1],i=Boolean(c),o=Object(r.useState)(!1),l=Object(u.a)(o,2),d=l[0],b=l[1],g=function(){s(null)},h=Object(j.g)();return Object(y.jsxs)(r.Fragment,{children:[Object(y.jsx)(Ne.a,{title:"Account settings",children:Object(y.jsx)(ke.a,{onClick:function(e){s(e.currentTarget)},size:"small",children:Object(y.jsx)(Se.a,{sx:{width:32,height:32}})})}),Object(y.jsxs)(Ue.a,{anchorEl:c,open:i,onClose:g,onClick:g,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[Object(y.jsxs)(we.a,{onClick:function(){return b(!0)},children:[Object(y.jsx)(Ie.a,{})," Change Avatar"]}),Object(y.jsx)(ze.a,{}),Object(y.jsxs)(we.a,{onClick:function(e){window.localStorage.removeItem("userAuthenticated"),h.push("/register"),t(null)},children:[Object(y.jsx)(Fe.a,{children:Object(y.jsx)(Ae.a,{fontSize:"small"})}),"Logout"]})]}),Object(y.jsx)(De,{setCurrentUser:t,showDropzone:d,setShowDropzone:b})]})},Re=function(e){var t=e.currentUser,a=e.setCurrentUser,n=Ce();return Object(y.jsxs)(B.a,{className:n.currentUserContainer,children:[Object(y.jsxs)("div",{className:n.avatarNameContainer,children:[Object(y.jsx)(le.a,{className:n.currentUserAvatarColor,src:t&&t.avatar?"/users/avatar/".concat(t.avatar):""}),Object(y.jsx)(v.a,{className:n.currentUserName,children:Object(y.jsx)("b",{children:t?t.username:"None"})})]}),Object(y.jsx)(Me,{setCurrentUser:a})]})},Pe=function(e){var t=e.currentUser,a=e.setCurrentUser,n=e.users,c=e.startConversation,s=Object(r.useState)(""),i=Object(u.a)(s,2),o=i[0],l=i[1],d=ve();return Object(y.jsxs)("div",{className:d.userPanelContainer,children:[Object(y.jsx)(Re,{currentUser:t,setCurrentUser:a}),Object(y.jsx)(v.a,{className:d.chatHeaderText,variant:"h4",children:"Chats"}),Object(y.jsx)(fe,{name:o,handler:function(e){l(e.target.value)}}),Object(y.jsx)(ge,{users:n,filterUser:o,startConversation:c})]})},Ee=a(724),Le=Object(m.a)((function(e){return{messageBox:Object(h.a)({flexGrow:1,overflow:"scroll",margin:e.spacing(1)},e.breakpoints.up("md"),{margin:e.spacing(2,4)}),sendingMessageContainer:{margin:e.spacing(2),display:"flex",justifyContent:"flex-end"},receivingMessageContainer:{margin:e.spacing(2),display:"flex",justifyContent:"flex-start"},sentMessageBackground:{background:"linear-gradient(90deg, rgba(58,141,255,1) 0%, rgba(107,169,255,0.85) 100%)",color:"white",borderBottomLeftRadius:18,borderTopLeftRadius:18,borderBottomRightRadius:18,padding:e.spacing(2,5,2,4),maxWidth:"50%"},receivedMessageBackground:{background:"#F4F4F4",color:"rgba(89, 89, 89, 0.80)",borderBottomLeftRadius:18,borderTopRightRadius:18,borderBottomRightRadius:18,padding:e.spacing(2,5,2,4),maxWidth:"50%"}}})),We=a(373),He=function(e){var t=e.currentUser,a=e.messages,n=Le();return Object(y.jsx)(We.a,{className:n.messageBox,children:a.map((function(e,a){return t.username==e.sender.username?Object(y.jsx)("div",{className:n.sendingMessageContainer,children:Object(y.jsx)("div",{className:n.sentMessageBackground,children:e.text})},a):Object(y.jsx)("div",{className:n.receivingMessageContainer,children:Object(y.jsxs)("div",{className:n.receivedMessageBackground,children:[Object(y.jsxs)("b",{children:[e.sender.username,":"]})," ",e.text]})},a)}))})},Je=Object(m.a)((function(e){return{chatHeaderContainer:{boxShadow:"0.125em 0.25em 0.5em rgba(0, 0, 0, 0.1)",width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:e.spacing(3,0)},chatHeaderTextAvatarContainer:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:e.spacing(4)},chatHeaderText:{marginLeft:e.spacing(4),fontSize:30,fontWeight:"bold"},closeChat:Object(h.a)({marginRight:e.spacing(1)},e.breakpoints.up("sm"),{display:"none"}),closeIcon:{fontSize:50}}})),qe=a(371),Ze=a.n(qe),Ge=function(e){var t=e.targetUser,a=e.toggleOpen,n=Je(),r=ue(t.username,50,80);return Object(y.jsxs)("div",{className:n.chatHeaderContainer,children:[Object(y.jsxs)("div",{className:n.chatHeaderTextAvatarContainer,children:[Object(y.jsx)(le.a,{src:t.avatar?"/users/avatar/".concat(t.avatar):"",style:{width:50,height:50,background:"".concat(r)}}),Object(y.jsx)("div",{className:n.chatHeaderText,children:t.username})]}),Object(y.jsx)(C.a,{onClick:a,className:n.closeChat,children:Object(y.jsx)(Ze.a,{color:"primary",fontSize:"large"})})]})},Ye=Object(m.a)((function(e){return{chatInput:Object(h.a)({display:"flex",flexDirection:"horizontal",alignItems:"center",background:"#F4F6FA",height:80,borderRadius:10,margin:e.spacing(0,2,2,2),padding:e.spacing(0,1,0,4)},e.breakpoints.down("sm"),{margin:e.spacing(0,2,2,2),padding:e.spacing(0,0,0,4),height:60}),chatInputText:Object(h.a)({fontSize:22},e.breakpoints.down("sm"),{fontSize:18})}})),Ke=a(372),$e=a.n(Ke),_e=a(715),Qe=a(82),Ve=function(e){var t=e.sendMessage,a=e.text,n=e.setText,r=Ye(),c=Object(Qe.a)(),s=Object(_e.a)(c.breakpoints.down("sm"));return Object(y.jsx)("form",{autoComplete:"off",onSubmit:t,children:Object(y.jsxs)(he.a,{className:r.chatInput,elevation:0,children:[Object(y.jsx)(pe.a,{className:r.chatInputText,value:a,variant:"outlined",placeholder:s?"Say.....":"Type something...",fullWidth:!0,autoFocus:!0,onChange:function(e){e.preventDefault(),n(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?t(e):null}}),Object(y.jsx)(me.a,{"aria-label":"send-message",disabled:""===a.trim(),type:"button",onClick:t,variant:"contained",color:"primary",children:Object(y.jsx)($e.a,{})})]})})},Xe=Object(m.a)((function(e){return{chatContainer:Object(h.a)({display:"flex",flexDirection:"column",height:"100vh"},e.breakpoints.down("xs"),{width:"100vw"})}})),et=function(e){var t=e.currentUser,a=e.targetUser,n=e.messages,r=e.text,c=e.setText,s=e.sendMessage,i=e.toggleOpen,o=Xe();return Object(y.jsxs)("div",{className:o.chatContainer,children:[Object(y.jsx)(Ge,{targetUser:a,toggleOpen:i}),Object(y.jsx)(He,{currentUser:t,messages:n}),Object(y.jsx)(Ve,{text:r,setText:c,sendMessage:s})]})},tt=a(376),at=Object(m.a)((function(e){return{root:{height:"100vh",width:"100vw"},openPanel:{display:"block"},closePanel:Object(h.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),noChatContainer:{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%",background:"rgba(232, 232, 232, 0.4)",textAlign:"center",alignItems:"center"},noChatIcon:{color:"rgba(89, 89, 89, 0.80)",fontSize:100,marginBottom:e.spacing(5)},noChatText:{color:"rgba(89, 89, 89, 0.80)"}}})),nt=function(){var e,t=Object(j.g)(),a=at(),n=Object(r.useState)(""),c=Object(u.a)(n,2),s=c[0],i=c[1],o=Object(r.useState)(!1),l=Object(u.a)(o,2),d=l[0],g=l[1],m=Object(r.useState)(null),p=Object(u.a)(m,2),x=p[0],O=p[1],f=Object(r.useState)([]),C=Object(u.a)(f,2),w=C[0],S=C[1],N=Object(r.useState)(""),k=Object(u.a)(N,2),z=k[0],T=k[1],A=Object(r.useState)([]),F=Object(u.a)(A,2),B=F[0],D=F[1],M=Object(r.useState)(""),R=Object(u.a)(M,2),P=R[0],E=R[1],L=Object(r.useState)(!1),W=Object(u.a)(L,2),H=W[0],J=W[1],q=function(){J(!H)};Object(r.useEffect)((function(){var e=window.localStorage.getItem("userAuthenticated");if(e){var a=JSON.parse(e);O(a),V(a.token),ae.getUsers({username:a.username}).then((function(e){return S(e)}))}else alert("You must be logged in"),t.push("/login")}),[t]);var Z=function(){var e=Object(I.a)(U.a.mark((function e(t){var a,n,r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D([]),E(t),a={usernames:[x.username,t.username]},e.next=5,se.createConversation(a);case 5:n=e.sent,g(!0),i(n.id),n.messages&&D(n.messages),r={user:x.username,target:t.username,id:n.id},Q.emit("join",r),q();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){Q.on("message",(function(e){D((function(t){return[].concat(Object($.a)(t),[e])}))}))}),[]);var G=function(){var e=Object(I.a)(U.a.mark((function e(t){var a,n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=z.trim(),n={sender:{username:x.username},text:a},!a){e.next=8;break}return e.next=6,se.saveMessage(s,a);case 6:e.sent,Q.emit("sendMessage",{currentConversationID:s,msg:n},(function(){return T("")}));case 8:T("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)(b.a,{container:!0,className:a.root,children:[Object(y.jsx)(b.a,{item:!0,xs:12,sm:4,md:3,className:H?a.closePanel:a.openPanel,children:Object(y.jsx)(Pe,(e={currentUser:x,setCurrentUser:O,users:w},Object(h.a)(e,"currentUser",x),Object(h.a)(e,"startConversation",Z),e))}),Object(y.jsx)(b.a,{item:!0,sm:8,md:9,className:H?a.openPanel:a.closePanel,children:d?Object(y.jsx)(et,{currentUser:x,targetUser:P,messages:B,text:z,setText:T,sendMessage:G,toggleOpen:q}):Object(y.jsxs)(Ee.a,{className:a.noChatContainer,children:[Object(y.jsx)(tt.a,{className:a.noChatIcon}),Object(y.jsx)(v.a,{className:a.noChatText,variant:"h2",children:"No Active Chats yet!"})]})})]})},rt=function(){var e=Object(r.useState)(null),t=Object(u.a)(e,2),a=t[0],n=t[1];return Object(r.useEffect)((function(){var e=window.localStorage.getItem("userAuthenticated");if(e){var t=JSON.parse(e);n(t),V(t.token)}}),[]),Object(y.jsx)(d.a,{children:Object(y.jsxs)(j.d,{children:[Object(y.jsx)(j.b,{path:"/register",component:W}),Object(y.jsx)(j.b,{path:"/login",component:K}),Object(y.jsx)(j.b,{path:"/messenger",children:Object(y.jsx)(nt,{})}),Object(y.jsx)(j.b,{path:"/",children:a?Object(y.jsx)(j.a,{to:"/messenger"}):Object(y.jsx)(W,{})})]})})};s.a.render(Object(y.jsx)(i.a,{theme:l,children:Object(y.jsx)(rt,{})}),document.getElementById("root"))}},[[636,1,2]]]);
//# sourceMappingURL=main.34886302.chunk.js.map