(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{361:function(e,t,n){},578:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n(16),s=n.n(c),i=(n(361),n(654)),o=n(337),l=Object(o.a)({typography:{fontFamily:"Open Sans"},palette:{primary:{main:"#3A8DFF"},secondary:{main:"#fff",contrastText:"#3A8DFF"}}}),u=n(10),j=n(80),d=n(22),b=n(639),g=n(658),m=n(7),h=n(637),p=Object(h.a)((function(e){return{container:{height:"100vh",width:"100vw"},left:Object(m.a)({},e.breakpoints.down("xs"),{display:"none"})}})),x=n(132),O=n(656),f=n(662),v=n(169),C=n(641),w=Object(h.a)((function(e){var t;return{container:(t={display:"flex",height:"100%",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:e.spacing(0,5)},Object(m.a)(t,e.breakpoints.down("xs"),{margin:e.spacing(0,4)}),Object(m.a)(t,e.breakpoints.up("lg"),{margin:e.spacing(0,15)}),t),headerText:{fontSize:"1.75em",textAlign:"start",width:"100%",marginBottom:e.spacing(3)},formContainer:{margin:e.spacing(0,5)},inputField:{marginBottom:e.spacing(2,0)},mainButton:{padding:e.spacing(1.5,5.5),margin:e.spacing(10,0,5)},redirectContainer:{marginBottom:e.spacing(10),display:"flex",flexDirection:"horizontal",alignItems:"end",width:"100%"},redirectButton:{padding:e.spacing(1.5,5.5)},redirectText:{color:"lightgrey",marginTop:e.spacing(1)}}})),y=n(2),N=function(){var e=w(),t=Object(d.g)();return Object(y.jsx)("div",{className:e.redirectContainer,children:Object(y.jsxs)(b.a,{container:!0,justifyContent:"flex-end",spacing:2,children:[Object(y.jsx)(b.a,{item:!0,children:Object(y.jsx)(v.a,{className:e.redirectText,variant:"subtitle1",children:"Already have an account?"})}),Object(y.jsx)(b.a,{item:!0,children:Object(y.jsx)(C.a,{id:"change-to-login-button",type:"button",variant:"contained",color:"secondary",size:"large",className:e.redirectButton,onClick:function(){t.push("/login")},children:Object(y.jsx)("b",{children:"Login"})})})]})})},k=function(e){var t=e.createUser,n=Object(r.useState)(""),a=Object(u.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(""),o=Object(u.a)(i,2),l=o[0],j=o[1],d=Object(r.useState)(""),m=Object(u.a)(d,2),h=m[0],p=m[1],k=Object(r.useState)(""),S=Object(u.a)(k,2),T=S[0],U=S[1],B=Object(r.useState)(!1),I=Object(u.a)(B,2),z=I[0],A=I[1],D=Object(r.useState)({}),R=Object(u.a)(D,2),P=R[0],F=R[1],M=w(),E=function(e,t){A(!1)};return Object(y.jsxs)("div",{className:M.container,children:[Object(y.jsx)(N,{}),Object(y.jsxs)("div",{className:M.formContainer,children:[Object(y.jsx)(v.a,{variant:"h4",className:M.headerText,children:Object(y.jsx)("b",{children:"Create an account"})}),Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),!function(){var e={};return e.username=c.length>2?"":"Minimum of 3 characters",e.password=h.length>5?"":"Minimum of 6 characters",e.email=/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9]+\.[A-Za-z]+$/.test(T)?"":"Email Format is xyz@xxx.xxx",F(Object(x.a)({},e)),Object.values(e).every((function(e){return""===e}))}()?A(!0):(t({username:c,name:l,email:T,password:h}),A(!1),s(""),j(""),U(""),p(""))},children:[Object(y.jsxs)(b.a,{container:!0,spacing:2,children:[Object(y.jsx)(b.a,{item:!0,xs:12,className:M.inputField,children:Object(y.jsx)(O.a,{value:c,label:"Username",id:"username",required:!0,fullWidth:!0,autoFocus:!0,autoComplete:"off",onChange:function(e){s(e.target.value)},error:Boolean(P.username),helperText:P.username?P.username:""})}),Object(y.jsx)(b.a,{item:!0,xs:12,children:Object(y.jsx)(O.a,{value:l,label:"Name",id:"name",required:!0,fullWidth:!0,autoComplete:"off",onChange:function(e){j(e.target.value)}})}),Object(y.jsx)(b.a,{item:!0,xs:12,children:Object(y.jsx)(O.a,{value:T,label:"E-mail Address",id:"email",required:!0,fullWidth:!0,autoComplete:"off",onChange:function(e){U(e.target.value)},error:Boolean(P.email),helperText:P.email?P.email:""})}),Object(y.jsx)(b.a,{item:!0,xs:12,children:Object(y.jsx)(O.a,{value:h,type:"password",label:"Password",id:"password",required:!0,fullWidth:!0,autoComplete:"off",onChange:function(e){p(e.target.value)},error:Boolean(P.password),helperText:P.password?P.password:""})})]}),Object(y.jsx)(b.a,{container:!0,justifyContent:"center",children:Object(y.jsx)(b.a,{item:!0,children:Object(y.jsx)(C.a,{id:"create-button",type:"submit",variant:"contained",color:"primary",size:"large",className:M.mainButton,disableElevation:!0,children:Object(y.jsx)("b",{children:"Create"})})})})]})]}),Object(y.jsx)("div",{children:Object(y.jsx)(f.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:z,autoHideDuration:3e3,onClose:E,children:Object(y.jsx)(g.a,{onClose:E,severity:"error",children:"Please make sure all inputs are valid."})})})]})},S=n(26),T=n.n(S),U=n(52),B=n(75),I=n.n(B),z=function(){var e=Object(U.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.post("/register",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A={create:z},D=n(644),R=n(316),P=n.n(R),F=n(657),M=n.p+"static/media/bg-img.0c5628a9.png",E=Object(h.a)((function(e){return{container:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",background:"linear-gradient(180deg, rgba(58, 141, 255, 0.85), rgba(134, 185, 255, 0.85)), url(".concat(M,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},icon:{fontSize:"75px"}}})),L=function(){var e=E();return Object(y.jsxs)(D.a,{className:e.container,children:[Object(y.jsx)(P.a,{color:"secondary",className:e.icon}),Object(y.jsx)(v.a,{variant:"h4",color:"secondary",align:"center",children:Object(y.jsx)(F.a,{letterSpacing:2,lineHeight:1.5,children:"Converse with anyone at any moment"})})]})},W=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(u.a)(c,2),i=s[0],o=s[1],l=Object(d.g)(),j=p();return Object(y.jsxs)(b.a,{container:!0,className:j.container,children:[Object(y.jsx)(b.a,{item:!0,sm:5,className:j.left,children:Object(y.jsx)(L,{})}),Object(y.jsxs)(b.a,{item:!0,xs:12,sm:7,className:j.right,children:[n&&Object(y.jsx)(g.a,{severity:"success",children:n}),i&&Object(y.jsx)(g.a,{severity:"error",children:i}),Object(y.jsx)(k,{createUser:function(e){A.create(e).then((function(e){a("Registration Successful! Welcome ".concat(e.name)),window.localStorage.setItem("userAuthenticated",JSON.stringify(e)),l.push("/messenger")})).catch((function(e){o("Something went wrong on our side. Please try again later")}))}})]})]})},H=Object(h.a)((function(e){var t,n;return{container:(t={display:"flex",height:"100%",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:e.spacing(0,5)},Object(m.a)(t,e.breakpoints.down("xs"),{margin:e.spacing(0,4)}),Object(m.a)(t,e.breakpoints.up("lg"),{margin:e.spacing(0,8)}),t),headerText:{fontSize:"1.75em",textAlign:"start",width:"100%",marginBottom:e.spacing(4)},formContainer:{width:"70%"},inputField:{marginBottom:e.spacing(2,0)},mainButton:{padding:e.spacing(1.5,5.5),margin:e.spacing(8,0,5)},redirectContainer:(n={marginBottom:e.spacing(10),marginRight:e.spacing(15),display:"flex",flexDirection:"horizontal",alignItems:"end",width:"100%"},Object(m.a)(n,e.breakpoints.down("xs"),{marginRight:e.spacing(0)}),Object(m.a)(n,e.breakpoints.down("sm"),{marginRight:e.spacing(5)}),Object(m.a)(n,e.breakpoints.down("md"),{marginRight:e.spacing(6)}),n),redirectButton:{padding:e.spacing(1.5,5.5)},redirectText:{color:"lightgrey",marginTop:e.spacing(1)}}})),J=function(){var e=H(),t=Object(d.g)();return Object(y.jsx)("div",{className:e.redirectContainer,children:Object(y.jsxs)(b.a,{container:!0,justifyContent:"flex-end",spacing:2,children:[Object(y.jsx)(b.a,{item:!0,children:Object(y.jsx)(v.a,{className:e.redirectText,variant:"subtitle1",children:"Don't have an account?"})}),Object(y.jsx)(b.a,{item:!0,children:Object(y.jsx)(C.a,{type:"button",variant:"contained",color:"secondary",size:"large",className:e.redirectButton,onClick:function(){t.push("/register")},children:Object(y.jsx)("b",{children:"Create"})})})]})})},q=function(e){var t=e.loginUser,n=Object(r.useState)(""),a=Object(u.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(""),o=Object(u.a)(i,2),l=o[0],j=o[1],d=H();return Object(y.jsxs)("div",{className:d.container,children:[Object(y.jsx)(J,{}),Object(y.jsxs)("div",{className:d.formContainer,children:[Object(y.jsx)(v.a,{variant:"h4",className:d.headerText,children:Object(y.jsx)("b",{children:"Welcome Back!"})}),Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({email:c,password:l}),s(""),j("")},children:[Object(y.jsxs)(b.a,{container:!0,spacing:2,children:[Object(y.jsx)(b.a,{item:!0,xs:12,className:d.inputField,children:Object(y.jsx)(O.a,{value:c,id:"email",label:"E-mail",fullWidth:!0,autoFocus:!0,autoComplete:"off",onChange:function(e){s(e.target.value)}})}),Object(y.jsx)(b.a,{item:!0,xs:12,children:Object(y.jsx)(O.a,{value:l,id:"password",type:"password",label:"Password",fullWidth:!0,autoComplete:"off",onChange:function(e){j(e.target.value)}})})]}),Object(y.jsx)(b.a,{container:!0,justifyContent:"center",children:Object(y.jsx)(b.a,{item:!0,children:Object(y.jsx)(C.a,{type:"submit",id:"login-button",variant:"contained",color:"primary",size:"large",className:d.mainButton,disableElevation:!0,children:Object(y.jsx)("b",{children:"Login"})})})})]})]})]})},Z=function(){var e=Object(U.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.post("/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G={login:Z},K=Object(h.a)((function(e){return{container:{height:"100vh",width:"100vw"},left:Object(m.a)({},e.breakpoints.down("xs"),{display:"none"})}})),Y=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(u.a)(c,2),i=s[0],o=s[1],l=Object(d.g)(),j=K();return Object(y.jsxs)(b.a,{container:!0,className:j.container,children:[Object(y.jsx)(b.a,{item:!0,sm:5,className:j.left,children:Object(y.jsx)(L,{})}),Object(y.jsxs)(b.a,{item:!0,xs:12,sm:7,children:[n&&Object(y.jsx)(g.a,{severity:"success",children:n}),i&&Object(y.jsx)(g.a,{severity:"error",children:i}),Object(y.jsx)(q,{loginUser:function(e){G.login(e).then((function(e){a("Login Successful! Redirecting to messager app"),window.localStorage.setItem("userAuthenticated",JSON.stringify(e)),l.push("/messenger")})).catch((function(e){o("Invalid Username or Password"),setTimeout((function(){o(null)}),5e3)}))}})]})]})},$=n(37),_=n(318),Q=n.n(_),V=function(){var e=Object(U.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.post("/users",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X={getUsers:V},ee="/messages",te=null,ne=function(){var e=Object(U.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.post(ee,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(U.a)(T.a.mark((function e(t,n){var a,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:"".concat(te)}},e.next=3,I.a.post("".concat(ee,"/").concat(t),{message:n},a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),re={createConversation:ne,saveMessage:ae,setToken:function(e){te="bearer ".concat(e)}},ce=n(645),se=n(646),ie=n(667),oe=function(e,t,n){for(var a=0,r=0;r<e.length;r++)a=e.charCodeAt(r)+((a<<5)-a);return"hsl(".concat(a%360,", ").concat(t,"%, ").concat(n,"%)")},le=function(e){var t=e.username,n=oe(t,50,80),a=Object(h.a)((function(e){return{userCardContainer:{height:"100px",width:"100%",display:"flex",alignItems:"center",cursor:"pointer",boxShadow:"0.125em 0.125em 0.25em rgba(0, 0, 0, 0.05)",paddingLeft:e.spacing(1)},avatarColor:{background:"".concat(n),width:"50px",height:"50px"}}}))();return Object(y.jsx)(ce.a,{className:a.userCardContainer,elevation:0,children:Object(y.jsx)(se.a,{avatar:Object(y.jsx)(ie.a,{className:a.avatarColor,"aria-label":"users",children:t.substring(0,1).toUpperCase()}),title:Object(y.jsx)("b",{children:t})})})},ue=n(647),je=n(642),de=function(e){var t=e.users,n=e.filterUser,a=e.startConversation;return Object(y.jsx)(je.a,{children:t?t.reduce((function(e,t){return t.username.toLowerCase().includes(n.toLowerCase())?[].concat(Object($.a)(e),[Object(y.jsx)(ue.a,{disableGutters:!0,style:{padding:1},onClick:function(){return a(t)},children:Object(y.jsx)(le,{username:t.username})},t.id)]):e}),[]):null})},be=n(581),ge=n(643),me=n(665),he=n(319),pe=n.n(he),xe=function(e){var t=e.name,n=e.handler,a=Object(h.a)((function(e){return{searchContainer:{background:"rgba(163, 198, 255, 0.3)",height:65,display:"flex",alignItems:"center",margin:e.spacing(0,2)},searchIconContainer:{paddingLeft:10}}}))();return Object(y.jsxs)(be.a,{className:a.searchContainer,elevation:0,children:[Object(y.jsx)(ge.a,{"aria-label":"search",disabled:!0,children:Object(y.jsx)(pe.a,{})}),Object(y.jsx)(me.a,{placeholder:"Search",id:"search-bar",inputProps:{"aria-label":"Search"},value:t,onChange:n})]})},Oe=Object(h.a)((function(e){return{userPanelContainer:{height:"100vh",overflow:"auto",boxShadow:"0.125em 0.125em 0.25em rgba(0, 0, 0, 0.025)"},chatHeaderText:{margin:e.spacing(0,2,2,2)}}})),fe=Object(h.a)((function(e){var t;return{currentUserContainer:(t={width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"left"},Object(m.a)(t,"justifyContent","space-between"),Object(m.a)(t,"padding",e.spacing(3,2)),t),avatarNameContainer:{display:"flex",flexDirection:"row",alignItems:"center"},currentUserAvatarColor:{background:"linear-gradient(180deg, rgba(58, 141, 255, 0.85), rgba(134, 185, 255, 0.85))",width:"60px",height:"60px",marginRight:e.spacing(2)},currentUserName:{fontSize:24}}})),ve=n(664),Ce=n(652),we=n(671),ye=n(672),Ne=n(655),ke=n(661),Se=n(660),Te=n(321),Ue=n.n(Te),Be=function(e){var t=e.setCurrentUser,n=Object(r.useState)(!1),a=Object(u.a)(n,2),c=a[0],s=a[1],i=Object(r.useRef)(null),o=fe(),l=function(e){s(!1)},j=function(e){"Tab"===e.key?(e.preventDefault(),s(!1)):"Escape"===e.key&&s(!1)},b=Object(d.g)(),g=function(e){window.localStorage.removeItem("userAuthenticated"),b.push("/register"),t(null)},m=Object(r.useRef)(c);return Object(r.useEffect)((function(){!0===m.current&&!1===c&&i.current.focus(),m.current=c}),[c]),Object(y.jsxs)("div",{className:o.accountSettings,children:[Object(y.jsx)(ve.a,{ref:i,id:"show-account-setting",onClick:function(){s((function(e){return!e}))},size:"large",children:Object(y.jsx)(Ue.a,{})}),Object(y.jsx)(Ne.a,{open:c,anchorEl:i.current,placement:"bottom-start",transition:!0,disablePortal:!0,children:function(e){var t=e.TransitionProps,n=e.placement;return Object(y.jsx)(we.a,Object(x.a)(Object(x.a)({},t),{},{style:{transformOrigin:"bottom-start"===n?"left top":"left bottom"},children:Object(y.jsx)(ye.a,{children:Object(y.jsx)(Ce.a,{onClickAway:l,children:Object(y.jsx)(Se.a,{autoFocusItem:c,onKeyDown:j,children:Object(y.jsx)(ke.a,{id:"logout-button",onClick:g,children:"Logout"})})})})}))}})]})},Ie=function(e){var t=e.currentUser,n=e.setCurrentUser,a=fe();return Object(y.jsxs)(D.a,{className:a.currentUserContainer,children:[Object(y.jsxs)("div",{className:a.avatarNameContainer,children:[Object(y.jsx)(ie.a,{className:a.currentUserAvatarColor}),Object(y.jsx)(v.a,{className:a.currentUserName,children:Object(y.jsx)("b",{children:t?t.username:"None"})})]}),Object(y.jsx)(Be,{setCurrentUser:n})]})},ze=function(e){var t=e.currentUser,n=e.setCurrentUser,a=e.users,c=e.startConversation,s=Object(r.useState)(""),i=Object(u.a)(s,2),o=i[0],l=i[1],j=Oe();return Object(y.jsxs)("div",{className:j.userPanelContainer,children:[Object(y.jsx)(Ie,{currentUser:t,setCurrentUser:n}),Object(y.jsx)(v.a,{className:j.chatHeaderText,variant:"h4",children:"Chats"}),Object(y.jsx)(xe,{name:o,handler:function(e){l(e.target.value)}}),Object(y.jsx)(de,{users:a,filterUser:o,startConversation:c})]})},Ae=n(663),De=Object(h.a)((function(e){return{messageBox:Object(m.a)({flexGrow:1,overflow:"scroll",margin:e.spacing(1)},e.breakpoints.up("md"),{margin:e.spacing(2,4)}),sendingMessageContainer:{margin:e.spacing(2),display:"flex",justifyContent:"flex-end"},receivingMessageContainer:{margin:e.spacing(2),display:"flex",justifyContent:"flex-start"},sentMessageBackground:{background:"linear-gradient(90deg, rgba(58, 141, 255, 0.85), rgba(134, 185, 255, 0.85))",color:"white",borderBottomLeftRadius:18,borderTopLeftRadius:18,borderBottomRightRadius:18,padding:e.spacing(2,5,2,4),maxWidth:"50%"},receivedMessageBackground:{background:"#F4F4F4",color:"rgba(89, 89, 89, 0.80)",borderBottomLeftRadius:18,borderTopRightRadius:18,borderBottomRightRadius:18,padding:e.spacing(2,5,2,4),maxWidth:"50%"}}})),Re=n(336),Pe=function(e){var t=e.currentUser,n=e.messages,a=De();return Object(y.jsx)(Re.a,{className:a.messageBox,children:n.map((function(e,n){return t.username==e.sender.username?Object(y.jsx)("div",{className:a.sendingMessageContainer,children:Object(y.jsx)("div",{className:a.sentMessageBackground,children:e.text})},n):Object(y.jsx)("div",{className:a.receivingMessageContainer,children:Object(y.jsxs)("div",{className:a.receivedMessageBackground,children:[Object(y.jsxs)("b",{children:[e.sender.username,":"]})," ",e.text]})},n)}))})},Fe=Object(h.a)((function(e){return{chatHeaderContainer:{boxShadow:"0.125em 0.25em 0.5em rgba(0, 0, 0, 0.1)",width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:e.spacing(3,0)},chatHeaderTextAvatarContainer:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:e.spacing(4)},chatHeaderText:{marginLeft:e.spacing(4),fontSize:30,fontWeight:"bold"},closeChat:Object(m.a)({marginRight:e.spacing(1)},e.breakpoints.up("sm"),{display:"none"}),closeIcon:{fontSize:50}}})),Me=n(334),Ee=n.n(Me),Le=function(e){var t=e.targetName,n=e.toggleOpen,a=Fe(),r=oe(t,50,80);return Object(y.jsxs)("div",{className:a.chatHeaderContainer,children:[Object(y.jsxs)("div",{className:a.chatHeaderTextAvatarContainer,children:[Object(y.jsx)(ie.a,{style:{width:50,height:50,background:"".concat(r)},children:t.substring(0,1).toUpperCase()}),Object(y.jsx)("div",{className:a.chatHeaderText,children:t})]}),Object(y.jsx)(C.a,{onClick:n,className:a.closeChat,children:Object(y.jsx)(Ee.a,{color:"primary",fontSize:"large"})})]})},We=Object(h.a)((function(e){return{chatInput:Object(m.a)({display:"flex",flexDirection:"horizontal",alignItems:"center",background:"rgba(163, 198, 255, 0.3)",height:80,borderRadius:20,margin:e.spacing(0,2,2,2),padding:e.spacing(0,4)},e.breakpoints.down("sm"),{margin:e.spacing(0,2,2,2),height:60}),chatInputText:Object(m.a)({fontSize:22},e.breakpoints.down("sm"),{fontSize:18})}})),He=n(335),Je=n.n(He),qe=n(653),Ze=n(219),Ge=function(e){var t=e.sendMessage,n=e.text,a=e.setText,r=We(),c=Object(Ze.a)(),s=Object(qe.a)(c.breakpoints.down("sm"));return Object(y.jsx)("form",{autoComplete:"off",onSubmit:t,children:Object(y.jsxs)(be.a,{className:r.chatInput,elevation:0,children:[Object(y.jsx)(me.a,{className:r.chatInputText,value:n,variant:"outlined",placeholder:s?"Say.....":"Type something...",fullWidth:!0,autoFocus:!0,onChange:function(e){e.preventDefault(),a(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?t(e):null}}),Object(y.jsx)(ge.a,{"aria-label":"send-message",disabled:""===n.trim(),type:"button",onClick:t,variant:"contained",color:"primary",children:Object(y.jsx)(Je.a,{})})]})})},Ke=Object(h.a)((function(e){return{chatContainer:Object(m.a)({display:"flex",flexDirection:"column",height:"100vh"},e.breakpoints.down("xs"),{width:"100vw"})}})),Ye=function(e){var t=e.currentUser,n=e.targetName,a=e.messages,r=e.text,c=e.setText,s=e.sendMessage,i=e.toggleOpen,o=Ke();return Object(y.jsxs)("div",{className:o.chatContainer,children:[Object(y.jsx)(Le,{targetName:n,toggleOpen:i}),Object(y.jsx)(Pe,{currentUser:t,messages:a}),Object(y.jsx)(Ge,{text:r,setText:c,sendMessage:s})]})},$e=n(338),_e=Object(h.a)((function(e){return{root:{height:"100vh",width:"100vw"},openPanel:{display:"block"},closePanel:Object(m.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),noChatContainer:{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%",background:"rgba(232, 232, 232, 0.4)",textAlign:"center",alignItems:"center"},noChatIcon:{color:"rgba(89, 89, 89, 0.80)",fontSize:100,marginBottom:e.spacing(5)},noChatText:{color:"rgba(89, 89, 89, 0.80)"}}})),Qe=function(){var e,t=Object(d.g)(),n=_e(),c=Object(r.useState)(""),s=Object(u.a)(c,2),i=s[0],o=s[1],l=Object(r.useState)(!1),j=Object(u.a)(l,2),g=j[0],h=j[1],p=Object(r.useState)(null),x=Object(u.a)(p,2),O=x[0],f=x[1],C=Object(r.useState)([]),w=Object(u.a)(C,2),N=w[0],k=w[1],S=Object(r.useState)(""),B=Object(u.a)(S,2),I=B[0],z=B[1],A=Object(r.useState)([]),D=Object(u.a)(A,2),R=D[0],P=D[1],F=Object(r.useState)(""),M=Object(u.a)(F,2),E=M[0],L=M[1],W=Object(r.useState)(!1),H=Object(u.a)(W,2),J=H[0],q=H[1],Z=function(){q(!J)};Object(r.useEffect)((function(){a=Q()();var e=window.localStorage.getItem("userAuthenticated");if(e){var n=JSON.parse(e);f(n),re.setToken(n.token),X.getUsers({username:n.username}).then((function(e){return k(e)}))}else alert("You must be logged in"),t.push("/login")}),[t]);var G=function(){var e=Object(U.a)(T.a.mark((function e(t){var n,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P([]),L(t.username),n={usernames:[O.username,t.username]},e.next=5,re.createConversation(n);case 5:r=e.sent,h(!0),o(r.id),r.messages&&P(r.messages),c={user:O.username,target:t.username,id:r.id},a.emit("join",c),Z();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){a.on("message",(function(e){P((function(t){return[].concat(Object($.a)(t),[e])}))}))}),[]);var K=function(){var e=Object(U.a)(T.a.mark((function e(t){var n,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=I.trim(),r={sender:{username:O.username},text:n},!n){e.next=8;break}return e.next=6,re.saveMessage(i,n);case 6:e.sent,a.emit("sendMessage",{currentConversationID:i,msg:r},(function(){return z("")}));case 8:z("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)(b.a,{container:!0,className:n.root,children:[Object(y.jsx)(b.a,{item:!0,xs:12,sm:4,md:3,className:J?n.closePanel:n.openPanel,children:Object(y.jsx)(ze,(e={currentUser:O,setCurrentUser:f,users:N},Object(m.a)(e,"currentUser",O),Object(m.a)(e,"startConversation",G),e))}),Object(y.jsx)(b.a,{item:!0,sm:8,md:9,className:J?n.openPanel:n.closePanel,children:g?Object(y.jsx)(Ye,{currentUser:O,targetName:E,messages:R,text:I,setText:z,sendMessage:K,toggleOpen:Z}):Object(y.jsxs)(Ae.a,{className:n.noChatContainer,children:[Object(y.jsx)($e.a,{className:n.noChatIcon}),Object(y.jsx)(v.a,{className:n.noChatText,variant:"h2",children:"No Active Chats yet!"})]})})]})},Ve=function(){var e=Object(r.useState)(null),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e=window.localStorage.getItem("userAuthenticated");if(e){var t=JSON.parse(e);a(t),re.setToken(t.token)}}),[]),Object(y.jsx)(j.a,{children:Object(y.jsxs)(d.d,{children:[Object(y.jsx)(d.b,{path:"/register",component:W}),Object(y.jsx)(d.b,{path:"/login",component:Y}),Object(y.jsx)(d.b,{path:"/messenger",children:Object(y.jsx)(Qe,{})}),Object(y.jsx)(d.b,{path:"/",children:n?Object(y.jsx)(d.a,{to:"/messenger"}):Object(y.jsx)(W,{})})]})})};s.a.render(Object(y.jsx)(i.a,{theme:l,children:Object(y.jsx)(Ve,{})}),document.getElementById("root"))}},[[578,1,2]]]);
//# sourceMappingURL=main.1914057d.chunk.js.map